{
  "version": 3,
  "sources": ["../../../src/tools/YccGlobalCache.ts", "../../../src/tools/YccPolyfill.ts", "../../../src/tools/YccLoader.ts", "../../../src/tools/YccMath.ts", "../../../src/ui/YccUI.ts", "../../../src/ui/TextUI.ts", "../../../src/YccLayer.ts", "../../../src/YccStage.ts", "../../../src/Ycc.ts", "../../../src/tools/YccUtils.ts", "../../../src/tools/YccTicker.ts", "../../../src/ui/ImageUI.ts", "../../../src/ui/LineUI.ts", "../../../src/ui/PolygonUI.ts", "../../../src/tools/YccTouchLife.ts", "../../../src/tools/YccGesture.ts", "../src/app.ts", "../bootstrap.ts"],
  "sourcesContent": ["interface GlobalCache {\n  /**\n   * \u73AF\u5883\u53D8\u91CF\n   */\n  env?: 'h5' | 'wxapp' | 'wxgame'\n\n  /**\n   * \u5E27\u7387\n   */\n  frameRate?: number\n}\nlet GLOBAL_CACHE: GlobalCache = {}\n\nGLOBAL_CACHE = JSON.parse(localStorage.getItem('ycc_global') ?? '{}')\n\n/**\n * \u83B7\u53D6\u5168\u5C40\u7684\u914D\u7F6E\n * @param key\n * @returns\n */\nexport function YccGlobal (key: keyof GlobalCache) {\n  return GLOBAL_CACHE[key]\n}\n\n/**\n * \u8BBE\u7F6E\u5168\u5C40\u914D\u7F6E\n * @param key\n * @param value\n */\nexport function SetGlobal <K extends keyof GlobalCache> (key: K, value: GlobalCache[K]) {\n  GLOBAL_CACHE[key] = value\n  localStorage.setItem('ycc_global', JSON.stringify(GLOBAL_CACHE))\n}\n", "/**\n * \u6B64\u6587\u4EF6\u5B58\u50A8\u90A3\u4E9B\u9700\u8981\u6839\u636E\u73AF\u5883`ycc.appenv`\u517C\u5BB9\u591A\u4E2A\u7AEF\u7684\u51FD\u6570\u65B9\u6CD5\n * \u65B9\u6CD5\u540D\u5168\u90E8\u5C0F\u5199\n */\n\nimport Ycc from '../Ycc'\nimport { YccGlobal } from './YccGlobalCache'\n\n/**\n * \u521B\u5EFAcanvas\n * @param options\n * @param options.width\n * @param options.height\n * @param options.dpi \u50CF\u7D20\u6BD4\n */\nexport function createCanvas (options: { width: number, height: number, dpi?: number }) {\n  const canvas = document.createElement('canvas')\n  const dpi = options.dpi ?? 2\n  // const dpi = 1\n\n  // \u8BBE\u7F6Edpi\n  canvas.width = options.width * dpi\n  canvas.height = options.height * dpi\n  canvas.style.width = options.width.toString() + 'px'\n\n  // \u53BB\u96645px inline-block\u504F\u5DEE\n  canvas.style.display = 'block'\n  // debug\n  // document.body.appendChild(canvas)\n  // \u8FD4\u56DE\u503C\n  return canvas\n}\n/**\n * \u521B\u5EFA\u56FE\u7247\n * @param ycc\n * @returns\n */\nexport function createImage (ycc: Ycc): HTMLImageElement {\n  if (YccGlobal('env') === 'wxapp') {\n    if (!ycc) { console.error('ycc\u5B9E\u4F8B\u5FC5\u4F20'); return new HTMLImageElement() }\n    return ycc.stage.stageCanvas.createImage()\n  }\n  const img = new Image()\n  // debug\n  // document.body.appendChild(img)\n  return img\n}\n", "import Ycc from '../Ycc'\nimport { createImage } from './YccPolyfill'\n\nexport interface Resource {\n  /**\n   * \u8D44\u6E90\u7684\u540D\u79F0\n   */\n  name: string\n  /**\n   * \u8D44\u6E90\u7684\u8FDC\u7AEF\u94FE\u63A5\n   */\n  url: string\n  /**\n   * \u8D44\u6E90\u7684\u7C7B\u578B\n   */\n  type: 'image' | 'audio'\n  /**\n   * \u8D44\u6E90\u52A0\u8F7D\u7684html\u5143\u7D20\n   */\n  element?: HTMLImageElement | HTMLAudioElement\n  /**\n   * \u56FE\u7247\u8DE8\u57DF\u6807\u8BC6\n   */\n  crossOrigin?: string\n\n  /**\n   * \u662F\u5426\u52A0\u8F7D\u6210\u529F\n   */\n  success?: boolean\n\n  /**\n   * \u52A0\u8F7D\u5931\u8D25\u7684\u9519\u8BEF\u6D88\u606F\n   */\n  errorMsg?: string\n}\n\n/**\n * \u8D44\u6E90\u52A0\u8F7D\u5B8C\u6210\u540E\u7684\u6570\u636E\u7ED3\u6784\n */\nexport interface LoaderResult {\n  /**\n   * \u6210\u529F\u7684\u603B\u6570\n   */\n  successCnt: number\n  /**\n   * \u8D44\u6E90\u7684\u603B\u6570\n   */\n  totalCnt: number\n\n  /**\n   * \u6570\u7EC4\u8D44\u6E90\u96C6\u5408\n   */\n  resArr: Resource[]\n  /**\n   * Map\u8D44\u6E90\u96C6\u5408\n   */\n  resMap: Record<string, Resource>\n}\n/**\n * \u8FDB\u5EA6\u56DE\u8C03\n */\ntype ProgressCb = (curRes: Resource, index: number) => void\n\n/**\n * \u7ED3\u679C\u56DE\u8C03\n */\ntype EndCb = (result: LoaderResult) => void\n\n/**\n * \u6279\u91CF\u52A0\u8F7D\u8D44\u6E90\uFF0C\u5E76\u53D1\u52A0\u8F7D\n */\nexport class ParallelLoader {\n  resArr: Resource[]\n  ycc: Ycc\n  endCb?: EndCb\n  progressCb?: ProgressCb\n  constructor (ycc: Ycc, resArr: Resource[]) {\n    this.ycc = ycc\n    this.resArr = resArr\n  }\n\n  bind: (ycc: Ycc) => ParallelLoader = (ycc) => {\n    this.ycc = ycc\n    return this\n  }\n\n  load: (endCb: EndCb, progressCb?: ProgressCb) => ParallelLoader = (endCb, progressCb) => {\n    const { ycc, resArr } = this\n    this.endCb = endCb\n    this.progressCb = progressCb\n    // \u52A0\u8F7D\u5B8C\u6210\u540E\u7684\u6570\u7EC4\n    const endResArr: Resource[] = []\n    // \u52A0\u8F7D\u5B8C\u6210\u540E\u7684record\n    const endResMap: Record<string, Resource> = {}\n\n    let endLen = 0\n    let successCnt = 0\n    for (let i = 0; i < resArr.length; i++) {\n      const curRes = resArr[i]\n      // \u65B0\u5EFA\u8D44\u6E90\n      if (curRes.type === 'image') { curRes.element = createImage(ycc) }\n      if (curRes.type === 'audio') { curRes.element = new Audio() }\n      console.log(curRes.type)\n\n      loadResource(curRes, res => {\n        if (progressCb) progressCb(res, i)\n        endResArr.push(res)\n        endResMap[res.name] = res\n        endLen++\n        if (res.success) successCnt++\n        if (endLen === resArr.length) {\n          if (endCb) {\n            endCb({\n              totalCnt: resArr.length,\n              successCnt,\n              resArr: endResArr,\n              resMap: endResMap\n            })\n          }\n        }\n      })\n    }\n    return this\n  }\n\n  end: (endCb: EndCb) => ParallelLoader = (endCb) => {\n    this.endCb = endCb\n    return this\n  }\n\n  progress: (progressCb: ProgressCb) => ParallelLoader = (progressCb) => {\n    this.progressCb = progressCb\n    return this\n  }\n}\n\n/**\n * \u52A0\u8F7D\u4E00\u4E2A\u8D44\u6E90\n * @param res\n * @param endCb\n */\nexport function loadResource (res: Resource, endCb: (res: Resource) => void) {\n  if ((res.element instanceof HTMLImageElement)) {\n    loadImage(res, endCb)\n  }\n  if ((res.element instanceof Audio)) {\n    loadAudio(res, endCb)\n  }\n}\n\n/**\n * \u52A0\u8F7D\u4E00\u5F20\u56FE\u7247\uFF0C\u56DE\u8C03\u8FD4\u56DE\u52A0\u8F7D\u540E\u7684\u8D44\u6E90\n * @param res\n * @param endCb\n */\nexport function loadImage (res: Resource, endCb: (res: Resource) => void) {\n  res.success = false\n  if (!(res.element instanceof HTMLImageElement)) { endCb(res); return }\n  res.type = 'image'\n  if ((res.element.setAttribute) != null) {\n    res.element.setAttribute('src', res.url)\n    res.element.setAttribute('crossOrigin', res.crossOrigin ?? '')\n  }\n\n  res.element.onload = (e) => {\n    res.success = true\n    endCb(res)\n  }\n  res.element.onerror = (e) => {\n    res.errorMsg = (e as string).toString()\n    endCb(res)\n  }\n}\n\n/**\n * \u52A0\u8F7D\u4E00\u4E2A\u97F3\u9891\uFF0C\u56DE\u8C03\u8FD4\u56DE\u52A0\u8F7D\u540E\u7684\u8D44\u6E90\n * @param res\n * @param endCb\n */\nexport function loadAudio (res: Resource, endCb: (res: Resource) => void) {\n  res.success = false\n  if (!(res.element instanceof Audio)) { endCb(res); return }\n  res.type = 'audio'\n  if ((res.element.setAttribute) != null) {\n    res.element.setAttribute('src', res.url)\n    res.element.setAttribute('crossOrigin', res.crossOrigin ?? '')\n    res.element.setAttribute('preload', 'load')\n  }\n\n  res.element.onloadedmetadata = (e) => {\n    res.success = true\n    endCb(res)\n  }\n  res.element.onerror = e => {\n    res.errorMsg = (e as string).toString()\n    endCb(res)\n  }\n}\n", "\n/**\n * \u70B9\u7684\u5B9A\u4E49\n */\nexport class YccMathDot {\n  x: number\n  y: number\n  constructor (x?: number, y?: number) {\n    this.x = x ?? 0\n    this.y = y ?? 0\n  }\n\n  isEqual (dot: YccMathDot) {\n    return this.x === dot.x && this.y === dot.y\n  }\n\n  /**\n   * \u70B9\u662F\u5426\u5728\u67D0\u4E2A\u533A\u57DF\u5185\n   */\n  isInRect (rect: YccMathRect) {\n    return this.x >= rect.x && this.x <= rect.x + rect.width && this.y >= rect.y && this.y <= rect.y + rect.height\n  }\n\n  /**\n   * \u70B9\u7684\u52A0\u6CD5/\u70B9\u7684\u504F\u79FB\u91CF\n   * @param dot {YccMathDot} \u52A0\u7684\u70B9\n   * @return {YccMathDot} \u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684\u70B9\n   */\n  plus (dot: YccMathDot) {\n    return new YccMathDot(this.x + dot.x, this.y + dot.y)\n  }\n\n  /**\n   * \u70B9\u7684\u51CF\u6CD5\n   * @param dot\n   */\n  sub (dot: YccMathDot) {\n    return new YccMathDot(this.x - dot.x, this.y - dot.y)\n  }\n\n  /**\n   * \u7F29\u653E\u6BD4\u4F8B\n   * @param x x\u8F74\u7684\u7F29\u653E\n   * @param y y\u8F74\u7684\u7F29\u653E\n   */\n  divide (x: number, y = 1) {\n    return new YccMathDot(Math.floor(this.x / x), Math.floor(this.y / y))\n  }\n\n  /**\n   * \u9002\u914Ddpi\uFF0C\u53BB\u9664dpi\u7684\u5F71\u54CD\uFF0C\u8F6C\u6362\u4E3A\u7269\u7406\u50CF\u7D20\n   * @param dpi\n   * @returns\n   */\n  dpi (dpi: number = 1) {\n    return this.divide(1 / dpi, 1 / dpi)\n  }\n\n  /**\n   * \u5C06\u5F53\u524D\u70B9\u7ED5\u53E6\u5916\u4E00\u4E2A\u70B9\u65CB\u8F6C\u4E00\u5B9A\u5EA6\u6570\n   * @param rotation  \u65CB\u8F6C\u89D2\u5EA6\n   * @param anchorDot  \u951A\u70B9\u5750\u6807\n   * @return \u65CB\u8F6C\u540E\u7684\u70B9\n   */\n  rotate (rotation: number, anchorDot?: YccMathDot) {\n    anchorDot = anchorDot ?? new YccMathDot(0, 0)\n    const dotX = this.x; const dotY = this.y; const anchorX = anchorDot.x; const anchorY = anchorDot.y\n    const dx = (dotX - anchorX) * Math.cos(rotation / 180 * Math.PI) - (dotY - anchorY) * Math.sin(rotation / 180 * Math.PI) + anchorX\n    const dy = (dotY - anchorY) * Math.cos(rotation / 180 * Math.PI) + (dotX - anchorX) * Math.sin(rotation / 180 * Math.PI) + anchorY\n    return new YccMathDot(dx, dy)\n  }\n\n  /**\n   * \u5224\u65AD\u4E09\u70B9\u662F\u5426\u5171\u7EBF\n   * @param dot1\n   * @param dot2\n   * @param dot3\n   */\n  static threeDotIsOnLine (dot1: YccMathDot, dot2: YccMathDot, dot3: YccMathDot) {\n    // \u5B58\u5728\u4F4D\u7F6E\u76F8\u540C\u70B9\u80AF\u5B9A\u5171\u7EBF\n    if (dot1.isEqual(dot2) || dot1.isEqual(dot3) || dot2.isEqual(dot3)) { return true }\n    // \u4E09\u4E2A\u70B9x\u4E00\u6837\n    if (dot1.x === dot2.x && dot2.x === dot3.x) { return true }\n    const k1 = Math.abs(dot1.y - dot2.y) / Math.abs(dot1.x - dot2.x)\n    const k2 = Math.abs(dot1.y - dot3.y) / Math.abs(dot1.x - dot3.x)\n    return k1 === k2\n  }\n}\n\n/**\n * \u533A\u57DF\u7684\u5B9A\u4E49\n */\nexport class YccMathRect {\n  x: number\n  y: number\n  width: number\n  height: number\n\n  constructor (x?: number, y?: number, width?: number, height?: number) {\n    /**\n     * \u5DE6\u4E0A\u89D2x\u5750\u6807\n     * @type {number}\n     */\n    this.x = x ?? 0\n    /**\n      * \u5DE6\u4E0A\u89D2y\u5750\u6807\n      * @type {number}\n      */\n    this.y = y ?? 0\n    /**\n      * \u533A\u57DF\u5BBD\n      * @type {number}\n      */\n    this.width = width ?? 0\n    /**\n      * \u533A\u57DF\u9AD8\n      * @type {number}\n      */\n    this.height = height ?? 0\n  }\n\n  /**\n   * \u5C06\u77E9\u5F62\u7684\u957F\u548C\u5BBD\u8F6C\u6362\u4E3A\u6B63\u6570\n   */\n  toPositive () {\n    const x0 = this.x\n    const y0 = this.y\n    const x1 = this.x + this.width\n    const y1 = this.y + this.height\n    this.x = x0 < x1 ? x0 : x1\n    this.y = y0 < y1 ? y0 : y1\n    this.width = Math.abs(this.width)\n    this.height = Math.abs(this.height)\n  }\n\n  /**\n   * \u66F4\u65B0\u65B9\u5757\u7684\u4F4D\u7F6E\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684\u65B9\u5757\n   * @param x\n   * @param y\n   */\n  moveBy (x: number = 0, y: number = 0) {\n    return new YccMathRect(this.x + x, this.y + y, this.width, this.height)\n  }\n\n  /**\n   * \u66F4\u65B0\u65B9\u5757\u7684\u5C3A\u5BF8\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684\u65B9\u5757\n   * @param x\n   * @param y\n   */\n  sizeBy (x: number = 0, y: number = 0) {\n    return new YccMathRect(this.x, this.y, this.width + x, this.height + y)\n  }\n\n  /**\n   * \u7F29\u653E\u65B9\u5757\u7684\u5C3A\u5BF8\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684\u65B9\u5757\n   * @param x\n   * @param y\n   * @returns\n   */\n  scaleBy (x: number = 1, y: number = 1, withPos?: boolean) {\n    return new YccMathRect(withPos ? this.x * x : this.x, withPos ? this.y * y : this.y, this.width * x, this.height * y)\n  }\n\n  /**\n   * \u83B7\u53D6\u533A\u57DF\u7684\u9876\u70B9\u5217\u8868\n   * @return {YccMathDot[]}\n   */\n  getCoordinates () {\n    return [\n      new YccMathDot(this.x, this.y),\n      new YccMathDot(this.x + this.width, this.y),\n      new YccMathDot(this.x + this.width, this.y + this.height),\n      new YccMathDot(this.x, this.y + this.height),\n      new YccMathDot(this.x, this.y)\n    ]\n  }\n\n  /**\n   * \u9002\u914Ddpi\uFF0C\u53BB\u9664dpi\u7684\u5F71\u54CD\uFF0C\u4F7F\u7528\u7269\u7406\u50CF\u7D20\n   * @param dpi\n   */\n  dpi (dpi: number = 1) {\n    return new YccMathRect(this.x * dpi, this.y * dpi, this.width * dpi, this.height * dpi)\n  }\n\n  /**\n   * \u6839\u636E\u5411\u91CF\u66F4\u65B0\u533A\u57DF\n   * @param vertices\n   */\n  updateByVertices (vertices: Array<{ x: number, y: number }>) {\n    if (vertices.length !== 2) { console.error('\u6570\u7EC4\u53C2\u6570\u6709\u95EE\u9898\uFF01'); return this }\n    this.x = vertices[0].x\n    this.y = vertices[0].y\n    this.width = vertices[1].x - this.x\n    this.height = vertices[2].y - this.y\n    return this\n  }\n}\n\n/**\n   * \u5411\u91CF\u6784\u9020\u51FD\u6570\n   * @constructor\n   */\nexport class YccMathVector {\n  x: number\n  y: number\n  z: number\n  constructor (x?: number, y?: number, z?: number) {\n    this.x = x ?? 0\n    this.y = y ?? 0\n    this.z = z ?? 0\n  }\n\n  /**\n     * \u5411\u91CF\u7684\u70B9\u4E58\u6CD5\n     * @param v2 {Ycc.Math.Vector} \u70B9\u4E58\u5411\u91CF\n     * @return {number}\n     */\n  dot (v2: YccMathVector) {\n    return this.x * v2.x + this.y * v2.y + this.z * v2.z\n  }\n\n  /**\n     * \u5411\u91CF\u7684\u53C9\u4E58\u6CD5\n     * @param v2 {Ycc.Math.Vector} \u53C9\u4E58\u5411\u91CF\n     * @return {number}\n     */\n  cross (v2: YccMathVector) {\n    const res = new YccMathVector()\n    res.x = this.y * v2.z - v2.y * this.z\n    res.y = v2.x * this.z - this.x * v2.z\n    res.z = this.x * v2.y - v2.x * this.y\n    return res\n  }\n\n  /**\n   * \u83B7\u53D6\u5411\u91CF\u7684\u6A21\u957F\n   * @return {number}\n   */\n  getLength () {\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)\n  }\n}\n\n/**\n   * \u77E9\u9635\u7684\u6784\u9020\u65B9\u6CD5\u3002\n   * @param data  {array}    \u77E9\u9635\u6240\u6709\u884C\u62FC\u63A5\u7684\u6570\u7EC4\n   * @param m    {number}  \u884C\u6570\n   * @param n    {number}  \u5217\u6570\n   * @constructor\n   */\nexport class YccMathMatrix {\n  data: number[]\n  m: number\n  n: number\n  constructor (data?: number[], m?: number, n?: number) {\n    this.data = data ?? [] as number[]\n    this.m = m ?? 0\n    this.n = n ?? 0\n  }\n\n  /**\n   * \u77E9\u9635\u70B9\u4E58\u6CD5\n   * @param M  {Ycc.Math.Matrix}  \u53E6\u4E00\u4E2A\u77E9\u9635\n   */\n  dot (M: { m: any, n: any, get: (arg0: number, arg1: number) => number }) {\n    if (M.m !== this.n || M.n !== this.m) { console.error('\u4E24\u4E2A\u77E9\u9635\u7684\u884C\u6570\u548C\u5217\u6570\u4E0D\u5BF9\u5E94\uFF0C\u4E0D\u80FD\u76F8\u4E58\uFF01'); return }\n\n    const N = new YccMathMatrix([], this.m, this.m)\n    // \u5FAA\u73AF\u884C\n    for (let i = 1; i <= this.m; i++) {\n      // \u5FAA\u73AF\u77E9\u9635\u8D4B\u503C\n      for (let k = 1; k <= this.m; k++) {\n        let temp = 0\n        // \u5FAA\u73AF\u5217\n        for (let j = 1; j <= this.n; j++) {\n          temp += this.get(i, j) * M.get(j, k)\n        }\n        N.set(i, k, temp)\n      }\n    }\n    return N\n  }\n\n  /**\n   * \u83B7\u53D6\u77E9\u9635i\u884Cj\u5217\u7684\u5143\u7D20\u3002\n   * \u6CE8\uFF1Ai\uFF0Ci\u4E0B\u6807\u4ECE1\u5F00\u59CB\n   * @param i\n   * @param j\n   * @return {number}\n   */\n  get (i: number, j: number) {\n    return this.data[(i - 1) * this.n + j - 1]\n  }\n\n  /**\n   * \u8BBE\u7F6E\u77E9\u9635i\u884Cj\u5217\u7684\u5143\u7D20\u4E3Aval\n   * \u6CE8\uFF1Ai\uFF0Ci\u4E0B\u6807\u4ECE1\u5F00\u59CB\n   * @param i\n   * @param j\n   * @param val\n   */\n  set (i: number, j: number, val: any) {\n    this.data[(i - 1) * this.n + j - 1] = val\n  }\n}\n", "/**\n * UI\u6A21\u5757\u7684\u57FA\u7C7B\uFF0C\u9ED8\u8BA4\u662F\u4E2A\u591A\u8FB9\u5F62\n */\n\nimport YccLayer from '../YccLayer'\nimport { YccMathDot, YccMathRect } from '../tools/YccMath'\n\n/**\n  * UI\u7684\u516C\u7528\u5C5E\u6027\n  */\nexport interface YccUICommonProps {\n  /**\n    * UI\u7684\u540D\u79F0\uFF0C\u5C3D\u91CF\u4E0D\u8981\u91CD\u590D\n    */\n  name?: string\n  /**\n     * UI\u6240\u5C5E\u7684\u56FE\u5C42\uFF0C\u82E5UI\u4E3A\u52A0\u5165\u56FE\u5C42\uFF0C\u6240\u6709\u4E0E\u7ED8\u5236\u76F8\u5173\u7684\u65B9\u6CD5\u5C06\u629B\u9519\n     */\n  belongTo?: YccLayer\n\n  /**\n         * \u7528\u6237\u81EA\u5B9A\u4E49\u7684\u6570\u636E\n         */\n  userData?: any\n\n  /**\n     * \u951A\u70B9\u5750\u6807\uFF0C\u662F\u4E00\u4E2A\u76F8\u5BF9\u5750\u6807\uFF0C\u53EA\u76F8\u5BF9\u4E8E\u56FE\u5C42\uFF0C\u9ED8\u8BA4\u4E3A(0,0)\uFF0C\u5373\u56FE\u5C42\u7684\u5DE6\u4E0A\u89D2\n     * \u5F53ui\u5904\u4E8E\u65CB\u8F6C\u3001\u5E73\u79FB\u3001\u7F29\u653E\u65F6\uFF0C\u5C06\u53C2\u8003\u6B64\u951A\u70B9\u5750\u6807\n     * \u8F6C\u6362\u987A\u5E8F\uFF1A1\u3001\u7F29\u653E 2\u3001\u65CB\u8F6C 3\u3001\u5E73\u79FB\n     * @attention \u6B64\u5750\u6807\u4E3A\u5B9E\u9645\u7684\u7269\u7406\u50CF\u7D20\n     */\n  anchor: YccMathDot\n  /**\n     * \u76F8\u5BF9\u4E8E\u951A\u70B9\u7684\u65CB\u8F6C\u89D2\u5EA6\n     * @type {number}\n     */\n  rotation: number\n\n  /**\n     * \u591A\u8FB9\u5F62\u56FE\u5F62\u7684\u5BB9\u7EB3\u533A\uFF0C\u70B9\u5750\u6807\u6570\u7EC4\uFF0C\u4E3A\u4FDD\u8BC1\u56FE\u5F62\u80FD\u591F\u95ED\u5408\uFF0C\u8D77\u70B9\u548C\u7EC8\u70B9\u5FC5\u987B\u76F8\u7B49\n     * \u6B64\u5C5E\u6027\u662F\u4E00\u4E2A\u76F8\u5BF9\u5750\u6807\uFF0C\u76F8\u5BF9\u4E8E\u951A\u70B9\u5750\u6807\n     * @attention \u6B64\u5750\u6807\u4E3A\u5B9E\u9645\u7684\u7269\u7406\u50CF\u7D20\n     */\n  coordinates: YccMathDot[]\n\n  /**\n       * \u662F\u5426\u663E\u793A\n       * @type {boolean}\n       */\n  show: boolean\n  /**\n       * \u662F\u5426\u5E7D\u7075\u72B6\u6001\uFF0C\u9ED8\u8BA4false\n       * \u5E7D\u7075\u72B6\u6001\u7684UI\uFF1A\u53EA\u80FD\u7528\u4E8E\u663E\u793A\uFF0C\u4E0D\u53EF\u70B9\u51FB\uFF0C\u4E8B\u4EF6\u4E5F\u4E0D\u4F1A\u89E6\u53D1\uFF0C\u5176\u5B50\u5143\u7D20\u7684\u4E8B\u4EF6\u4E5F\u4E0D\u4F1A\u89E6\u53D1\uFF0C\u4E0D\u80FD\u901A\u8FC7getUIFromPointer\u83B7\u53D6\n       * \u7528\u4E8E\u89E3\u51B3\u591A\u4E2AUI\u91CD\u53E0\u65F6\u662F\u5426\u9700\u8981\u7A7F\u900F\uFF0C\u4EE5\u70B9\u51FB\u88AB\u8986\u76D6UI\u7684\u95EE\u9898\n       * @type {boolean}\n       */\n  ghost: boolean\n  /**\n       * \u9ED8\u8BA4\u60C5\u51B5\u4E0B\u4E3Atrue\uFF0CUI\u963B\u6B62\u4E8B\u4EF6\u5192\u6CE1\uFF0C\u4F46\u4E0D\u4F1A\u963B\u6B62\u4E8B\u4EF6\u4F20\u64AD\u7ED9\u56FE\u5C42\n       * @type {boolean}\n       */\n  stopEventBubbleUp: boolean\n\n  /**\n       * \u900F\u660E\u5EA6 \u9ED8\u8BA41\n       * @type {number}\n       */\n  opacity: number\n  /**\n        * \u7EBF\u6761\u5BBD\u5EA6 \u9ED8\u8BA41\n        * @type {number}\n        */\n  lineWidth: number\n\n  /**\n        * \u7EBF\u6761\u989C\u8272\uFF0C\u9ED8\u8BA4`black`\n        * @type {string}\n        */\n  strokeStyle: string\n\n  /**\n     * \u662F\u5426\u586B\u5145\uFF0C\u9ED8\u8BA4`true`\n     */\n  fill: boolean\n  /**\n     * \u586B\u5145\u6837\u5F0F\uFF0C\u9ED8\u8BA4'black'\n     */\n  fillStyle: string\n}\n\ninterface BgStyle {\n  color: string\n  withBorder: boolean\n  borderColor: string\n  borderWidth: number\n}\n\n/**\n    * \u591A\u8FB9\u5F62UI\n    * \u4F4D\u7F6E\u5750\u6807x\u3001y\u4E3A\u53EA\u8BFB\u5C5E\u6027\uFF0C\u4E14\u4E3A\u76F8\u5BF9\u5750\u6807\uFF0C\u9ED8\u8BA4\u53D6\u591A\u8FB9\u5F62\u7684\u7B2C\u4E00\u4E2A\u9876\u70B9\u5750\u6807\n    * @constructor\n    * @param {Partial<PolygonUIProps>} option    \u6240\u6709\u53EF\u914D\u7F6E\u7684\u914D\u7F6E\u9879\n    */\nexport default abstract class YccUI<YccUIProps extends YccUICommonProps = YccUICommonProps> {\n  /**\n    * UI\u7684\u5C5E\u6027\uFF0C\u9ED8\u8BA4\u5C5E\u6027\u5728\u6B64\u8BBE\u7F6E\n    */\n  props!: YccUIProps\n\n  /**\n   * \u4F20\u9012\u7ED9UI\u7684\u5C5E\u6027\u5217\u8868\n   */\n  readonly initProps: Partial<YccUIProps>\n\n  /**\n    * UI\u7684\u6784\u9020\u51FD\u6570\n    * @param {Partial<YccUIProps>} option\n    */\n  constructor (option: Partial<YccUIProps> = {}) {\n    this.initProps = option\n  }\n\n  /**\n   * \u83B7\u53D6UI\u7684\u9ED8\u8BA4\u5C5E\u6027\uFF0C\u5728\u521D\u59CB\u5316\u65F6\u4F1A\u8C03\u7528\u4E00\u6B21\n   * @overwrite \u9700\u5B50\u7C7B\u5B9E\u73B0\u7684\u65B9\u6CD5\n   */\n  abstract getDefaultProps (): YccUIProps\n\n  /**\n    * \u521D\u59CB\u5316UI\u5C5E\u6027\n    * @param option\n    */\n  private _extendOption (option: Partial<YccUIProps>) {\n    return Object.assign(this.props, option)\n  }\n\n  /**\n   * \u5F53UI\u88AB\u6DFB\u52A0\u81F3\u56FE\u5C42\u540E\uFF0C\u4F1A\u7ACB\u5373\u89E6\u53D1\u6B64hook\u51FD\u6570\n   * \u5F53\u5B50\u7C7B\u6709\u7279\u6B8A\u7684\u8BA1\u7B97\u5C5E\u6027\u65F6\uFF0C\u9700\u91CD\u5199\u6B64\u65B9\u6CD5\uFF0C\u5728\u6DFB\u52A0\u81F3\u56FE\u5C42\u65F6\u63D0\u524D\u8BA1\u7B97ui\u7684\u5C5E\u6027\uFF0C\u6BD4\u5982\uFF0C`ImageUI`\n   */\n  created (layer: YccLayer) {\n    this.props = this.getDefaultProps()\n    this.props = this._extendOption(this.initProps)\n    this.props.belongTo = layer\n  }\n\n  /**\n    * \u5C06\u6B64UI\u6DFB\u52A0\u81F3\u56FE\u5C42\n    * @param layer\n    */\n  addToLayer (layer: YccLayer) {\n    layer.addUI(this)\n    this.created(layer)\n    return this\n  }\n\n  /**\n    * \u5224\u65ADUI\u662F\u5426\u53EF\u7ED8\u5236\n    * \u5B58\u5728`belongTo`\u4E14\u5B58\u5728`coordinates`\u5219\u8BA4\u4E3A\u6B64UI\u53EF\u7ED8\u5236\n    * @overwrite \u82E5UI\u6709\u7279\u6B8A\u7684\u6E32\u67D3\u8FC7\u7A0B\uFF0C\u5219\u5B50\u7C7B\u9700\u91CD\u5199\u6B64\u65B9\u6CD5\n    */\n  isDrawable () {\n    if (!this.props.belongTo) { console.log('\u8BE5UI\u672A\u52A0\u5165\u56FE\u5C42'); return false }\n    if (!this.props.belongTo.stage.yccInstance) { console.log('\u56FE\u5C42\u8FD8\u672A\u52A0\u5165\u821E\u53F0'); return false }\n    if (this.props.coordinates.length === 0) { console.log('\u8BE5UI\u672A\u8BBE\u7F6E\u5750\u6807'); return false }\n    if (this.props.coordinates.length < 2) { console.log('\u8BE5UI\u5750\u6807\u672A\u6B63\u786E\u8BBE\u7F6E'); return false }\n    return true\n  }\n\n  /**\n   * \u5C06\n   * \u9002\u914Ddpi\n   */\n  dpiAdaptation () {\n    const { dpi } = this.props.belongTo!.stage.getSystemInfo()!\n    console.log(dpi)\n  }\n\n  /**\n    * \u6839\u636Ecoordinates\u7ED8\u5236\u8DEF\u5F84\n    * \u53EA\u7ED8\u5236\u8DEF\u5F84\uFF0C\u4E0D\u586B\u5145\u3001\u4E0D\u63CF\u8FB9\n    * \u6B64\u8FC7\u7A0B\u53EA\u4F1A\u53D1\u751F\u5728\u56FE\u5C42\u7684\u79BB\u5C4Fcanvas\u4E2D\n    */\n  renderPath () {\n    if (!this.isDrawable()) return\n\n    // \u7ED8\u56FE\u73AF\u5883\n    const ctx = this.props.belongTo!.ctx\n    // \u56FE\u5C42\u7684\u4F4D\u7F6E\n    const { worldCoordinates } = this.getWorldContainer()!\n\n    // \u65CB\u8F6C\u540E\u7684\u70B9\n    const start = worldCoordinates[0]\n    ctx.beginPath()\n    ctx.moveTo(start.x, start.y)\n    for (let i = 0; i < worldCoordinates.length - 1; i++) {\n      // \u65CB\u8F6C\u540E\u7684\u70B9\n      const dot = worldCoordinates[i]\n      ctx.lineTo(dot.x, dot.y)\n    }\n    ctx.closePath()\n  }\n\n  /**\n    * \u83B7\u53D6\u80FD\u5BB9\u7EB3\u591A\u8FB9\u5F62\u7684\u6700\u5C0F\u77E9\u5F62\u6846\uFF0C\u8FD4\u56DE\u7684\u5750\u6807\u5DF2\u7ECF\u7ECF\u8FC7dpi\u5904\u7406\uFF0C\u662F\u53EF\u76F4\u63A5\u7ED8\u5236`stage\u5750\u6807`\n    * @param {YccMathRect} rect \u76F8\u5BF9\u5750\u6807\uFF0C\u76F8\u5BF9\u4E8E`anchor`\uFF0C\u53EF\u76F4\u63A5\u4F20\u9012\u5B50ui\u7684`props.rect`\u5C5E\u6027\uFF0C\u7528\u4E8E\u5B50UI\u83B7\u53D6\u5BB9\u7EB3\u533A\n    * @returns {worldCoordinates,worldRect}\n    */\n  getWorldContainer (rect?: YccMathRect) {\n    if (!this.props.belongTo) { console.log('\u8BE5UI\u672A\u52A0\u5165\u56FE\u5C42'); return }\n    // \u56FE\u5C42\u7684\u4F4D\u7F6E\n    const dpi = this.getDpi()\n\n    // dpi\u5904\u7406\n    const dpiPosition = this.props.belongTo.position.dpi(dpi)\n    const dpiAnchor = this.props.anchor.dpi(dpi)\n    const dpiCoordinates = this.props.coordinates.map(item => item.dpi(dpi))\n    const dpiRect = rect?.dpi(dpi)\n\n    // \u5750\u6807\u8BA1\u7B97\n    const renderPosition = dpiPosition\n    const renderAnchor = dpiAnchor.plus(dpiPosition)\n    const renderCoordinates = dpiCoordinates.map(item => item.plus(renderAnchor))\n    const renderRect = dpiRect?.moveBy(renderAnchor.x, renderAnchor.y)\n\n    // \u821E\u53F0\u5750\u6807\u53D8\u6362\n    const worldPosition = renderPosition\n    const worldAnchor = renderAnchor\n    const worldCoordinates = renderCoordinates.map(\n      item => {\n        return item\n        // \u65CB\u8F6C\u3001\u5E73\u79FB\n          .rotate(this.props.rotation, worldAnchor)\n      }\n    )\n\n    const start = worldCoordinates[0]\n    let minx = start.x; let miny = start.y; let maxx = start.x; let maxy = start.y\n\n    for (let i = 0; i < worldCoordinates.length; i++) {\n      const dot = worldCoordinates[i]\n      if (dot.x < minx) minx = dot.x\n      if (dot.x >= maxx) maxx = dot.x\n      if (dot.y < miny) miny = dot.y\n      if (dot.y >= maxy) maxy = dot.y\n    }\n\n    return {\n      // renderPosition\u4E0EworldPosition\u4E00\u81F4\uFF0C\u56E0\u4E3A\uFF1ALayer\u4E0D\u5B58\u5728\u53D8\u6362\n      dpi: {\n        dpiAnchor,\n        dpiPosition,\n        dpiCoordinates,\n        dpiRect\n      },\n      render: {\n        renderPosition,\n        renderAnchor,\n        renderCoordinates,\n        renderRect\n      },\n      /**\n       * `worldRect`\u662F\u4E0D\u5B58\u5728\u7684\uFF0C\u56E0\u4E3A\u5B58\u5728\u65CB\u8F6C/\u53D8\u6362\uFF0C\u65CB\u8F6C\u540E\u7684\u56FE\u5F62\u65E0\u6CD5\u7528`rect`\u8868\u8FBE\uFF0C\u53EA\u80FD\u7531`renderRect`\u63A8\u5BFC\u51FA\u6765\n       */\n      worldRect: null,\n      worldPosition,\n      worldAnchor,\n      worldCoordinates,\n      worldContainerRect: new YccMathRect(minx, miny, maxx - minx, maxy - miny)\n    }\n  }\n\n  /**\n    * \u91CD\u8F7D\u57FA\u7C7B\u7684\u5305\u542B\u67D0\u4E2A\u70B9\u7684\u51FD\u6570\uFF0C\u7528\u4E8E\u70B9\u51FB\u4E8B\u4EF6\u7B49\u7684\u54CD\u5E94\n    * \u4E24\u79CD\u65B9\u6CD5\uFF1A\n    * \u65B9\u6CD5\u4E00\uFF1A\u7ECF\u8FC7\u8BE5\u70B9\u7684\u6C34\u5E73\u5C04\u7EBF\u4E0E\u591A\u8FB9\u5F62\u7684\u7126\u70B9\u6570\uFF0C\u5373Ray-casting Algorithm\n    * \u65B9\u6CD5\u4E8C\uFF1A\u67D0\u4E2A\u70B9\u59CB\u7EC8\u4F4D\u4E8E\u591A\u8FB9\u5F62\u9006\u65F6\u9488\u5411\u91CF\u7684\u5DE6\u4FA7\u3001\u6216\u8005\u987A\u65F6\u9488\u65B9\u5411\u7684\u53F3\u4FA7\u5373\u53EF\u5224\u65AD\uFF0C\u7B97\u6CD5\u540D\u5FD8\u8BB0\u4E86\n    * \u6B64\u65B9\u6CD5\u91C7\u7528\u65B9\u6CD5\u4E00\uFF0C\u5E76\u5047\u8BBE\u8BE5\u5C04\u7EBF\u5E73\u884C\u4E8Ex\u8F74\uFF0C\u65B9\u5411\u4E3Ax\u8F74\u6B63\u65B9\u5411\n    * @param dot {Ycc.Math.Dot} \u9700\u8981\u5224\u65AD\u7684\u70B9\uFF0C\u7EDD\u5BF9\u5750\u6807\uFF08world\u5750\u6807\uFF09\n    * @param noneZeroMode {Number} \u662F\u5426noneZeroMode 1--\u542F\u7528 2--\u5173\u95ED \u9ED8\u8BA4\u542F\u7528\n    *   \u4ECE\u8FD9\u4E2A\u70B9\u5F15\u51FA\u4E00\u6839\u201C\u5C04\u7EBF\u201D\uFF0C\u4E0E\u591A\u8FB9\u5F62\u7684\u4EFB\u610F\u82E5\u5E72\u6761\u8FB9\u76F8\u4EA4\uFF0C\u8BA1\u6570\u521D\u59CB\u5316\u4E3A0\uFF0C\u82E5\u76F8\u4EA4\u5904\u88AB\u591A\u8FB9\u5F62\u7684\u8FB9\u4ECE\u5DE6\u5230\u53F3\u5207\u8FC7\uFF0C\u8BA1\u6570+1\uFF0C\u82E5\u76F8\u4EA4\u5904\u88AB\u591A\u8FB9\u5F62\u7684\u8FB9\u4ECE\u53F3\u5230\u5DE6\u5207\u8FC7\uFF0C\u8BA1\u6570-1\uFF0C\u6700\u540E\u68C0\u67E5\u8BA1\u6570\uFF0C\u5982\u679C\u662F0\uFF0C\u70B9\u5728\u591A\u8FB9\u5F62\u5916\uFF0C\u5982\u679C\u975E0\uFF0C\u70B9\u5728\u591A\u8FB9\u5F62\u5185\n    * @return {boolean}\n    */\n  isContainDot (dot: YccMathDot, noneZeroMode?: 1 | 2) {\n    if (!this.props.belongTo) { console.log('\u8BE5UI\u672A\u52A0\u5165\u56FE\u5C42'); return }\n    // \u83B7\u53D6ui\u7684\u7EDD\u5BF9\u5750\u6807\n    const coordinates = this.getWorldContainer()!.worldCoordinates\n\n    // \u9ED8\u8BA4\u542F\u52A8none zero mode\n    noneZeroMode = noneZeroMode ?? 1\n\n    const _dot = dot\n\n    const x = _dot.x; const y = _dot.y\n    let crossNum = 0\n    // \u70B9\u5728\u7EBF\u6BB5\u7684\u5DE6\u4FA7\u6570\u76EE\n    let leftCount = 0\n    // \u70B9\u5728\u7EBF\u6BB5\u7684\u53F3\u4FA7\u6570\u76EE\n    let rightCount = 0\n    for (let i = 0; i < coordinates.length - 1; i++) {\n      const start = coordinates[i].rotate(this.props.rotation, this.props.anchor.plus(this.props.belongTo.position))\n      const end = coordinates[i + 1].rotate(this.props.rotation, this.props.anchor.plus(this.props.belongTo.position))\n\n      // \u8D77\u70B9\u3001\u7EC8\u70B9\u659C\u7387\u4E0D\u5B58\u5728\u7684\u60C5\u51B5\n      if (start.x === end.x) {\n        // \u56E0\u4E3A\u5C04\u7EBF\u5411\u53F3\u6C34\u5E73\uFF0C\u6B64\u5904\u8BF4\u660E\u4E0D\u76F8\u4EA4\n        if (x > start.x) continue\n\n        // \u4ECE\u5DE6\u4FA7\u8D2F\u7A7F\n        if ((end.y > start.y && y >= start.y && y <= end.y)) {\n          leftCount++\n          // console.log('++1');\n          crossNum++\n        }\n        // \u4ECE\u53F3\u4FA7\u8D2F\u7A7F\n        if ((end.y < start.y && y >= end.y && y <= start.y)) {\n          rightCount++\n          // console.log('++1');\n          crossNum++\n        }\n        continue\n      }\n      // \u659C\u7387\u5B58\u5728\u7684\u60C5\u51B5\uFF0C\u8BA1\u7B97\u659C\u7387\n      const k = (end.y - start.y) / (end.x - start.x)\n      // \u4EA4\u70B9\u7684x\u5750\u6807\n      const x0 = (y - start.y) / k + start.x\n      // \u56E0\u4E3A\u5C04\u7EBF\u5411\u53F3\u6C34\u5E73\uFF0C\u6B64\u5904\u8BF4\u660E\u4E0D\u76F8\u4EA4\n      if (x > x0) continue\n\n      if ((end.x > start.x && x0 >= start.x && x0 <= end.x)) {\n        // console.log('++2');\n        crossNum++\n        if (k >= 0) leftCount++\n        else rightCount++\n      }\n      if ((end.x < start.x && x0 >= end.x && x0 <= start.x)) {\n        // console.log('++2');\n        crossNum++\n        if (k >= 0) rightCount++\n        else leftCount++\n      }\n    }\n\n    // console.log('polygon',dot,noneZeroMode,crossNum,crossNum%2,leftCount,rightCount);\n    return noneZeroMode === 1 ? leftCount - rightCount !== 0 : crossNum % 2 === 1\n  }\n\n  /**\n   * \u83B7\u53D6\u7ED8\u56FE\u73AF\u5883\n   */\n  getContext () {\n    return this.props.belongTo?.ctx\n  }\n\n  /**\n   * \u83B7\u53D6dpi\n   * @returns\n   */\n  getDpi () {\n    return this.props.belongTo?.stage.getSystemInfo().dpi ?? 1\n  }\n\n  /**\n   * \u83B7\u53D6\u5F53\u524D\u5B9E\u4F8B\n   * @returns\n   */\n  getYcc () {\n    return this.props.belongTo?.stage.yccInstance\n  }\n\n  /**\n   * \u7ED8\u5236ui\u7684\u80CC\u666F\uFF0C\u591A\u7528\u4E8E\u8C03\u8BD5\n   * @returns\n   */\n  renderBg (bgStyle: BgStyle = { color: '#ccc', withBorder: true, borderColor: 'red', borderWidth: 4 }) {\n    if (!this.isDrawable() || !this.props.show) return\n    const ctx = this.getContext()!\n\n    ctx.save()\n    this.renderPath()\n    ctx.fillStyle = bgStyle.color\n    ctx.strokeStyle = bgStyle.borderColor\n    ctx.lineWidth = bgStyle.borderWidth\n    ctx.fill()\n    if (bgStyle.withBorder) ctx.stroke()\n    ctx.restore()\n  }\n\n  /**\n   * \u7ED8\u5236UI\u7684\u951A\u70B9\uFF0C\u591A\u7528\u4E8E\u8C03\u8BD5\n   */\n  renderAnchor () {\n    if (!this.isDrawable() || !this.props.show) return\n    const ctx = this.getContext()!\n    const world = this.getWorldContainer()!\n\n    ctx.save()\n    ctx.strokeStyle = 'blue'\n    ctx.lineWidth = 4\n\n    ctx.beginPath()\n    ctx.moveTo(world.worldAnchor.x + 16, world.worldAnchor.y)\n    ctx.lineTo(world.worldAnchor.x - 16, world.worldAnchor.y)\n    ctx.closePath()\n    ctx.stroke()\n\n    ctx.beginPath()\n    ctx.moveTo(world.worldAnchor.x, world.worldAnchor.y + 16)\n    ctx.lineTo(world.worldAnchor.x, world.worldAnchor.y - 16)\n    ctx.closePath()\n    ctx.stroke()\n\n    ctx.beginPath()\n    ctx.arc(world.worldAnchor.x, world.worldAnchor.y, 16, 0, 360)\n    ctx.closePath()\n    ctx.stroke()\n    ctx.closePath()\n\n    ctx.restore()\n  }\n\n  /**\n    * \u6E32\u67D3\u81F3\u79BB\u5C4Fctx\n    * @overwrite \u82E5UI\u6709\u7279\u6B8A\u7684\u6E32\u67D3\u8FC7\u7A0B\uFF0C\u5219\u6B64\u5904\u7684render\u65B9\u6CD5\u9700\u5B50\u7C7B\u91CD\u5199\n    */\n  abstract render (): void\n}\n\n/**\n * \u83B7\u53D6UI\u7684\u901A\u7528\u5C5E\u6027\n */\nexport function getYccUICommonProps (): YccUICommonProps {\n  return {\n    anchor: new YccMathDot(0, 0),\n    coordinates: [] as YccMathDot[],\n    fill: true,\n    fillStyle: 'black',\n    ghost: false,\n    lineWidth: 1,\n    opacity: 1,\n    rotation: 0,\n    show: true,\n    stopEventBubbleUp: true,\n    strokeStyle: 'black'\n  }\n}\n", "import { YccMathDot, YccMathRect } from '../tools/YccMath'\nimport YccUI, { getYccUICommonProps, YccUICommonProps } from './YccUI'\n\n/**\n * Text\u5C5E\u6027\uFF0C\u7EE7\u627F\u81EA\u516C\u7528\u5C5E\u6027\n */\ninterface YccUITextProps extends YccUICommonProps {\n  /**\n   * \u6587\u672C\u5185\u5BB9\n   */\n  value: string\n\n  /**\n   * \u6587\u672C\u6837\u5F0F\n   */\n  style: {\n    color?: string\n    fontSize?: number\n  }\n}\n\nexport default class TextUI extends YccUI<YccUITextProps> {\n  getDefaultProps (): YccUITextProps {\n    return {\n      ...getYccUICommonProps(),\n      value: '',\n      /**\n       * \u6B64\u5C5E\u6027\u53EA\u5728\u7ED8\u5236\u540E\u751F\u6548\n       */\n      coordinates: [\n        new YccMathDot(0),\n        new YccMathDot(0)\n      ],\n      style: {\n        fontSize: 16\n      }\n    }\n  }\n\n  /**\n   * \u7ED8\u5236\u51FD\u6570\n   */\n  render (): void {\n    if (!this.isDrawable() || !this.props.show) return\n    const ctx = this.getContext()!\n    const dpi = this.getDpi()\n    const fontSize = this.props.style.fontSize ?? 16\n\n    ctx.save()\n    ctx.fillStyle = this.props.style?.color ?? this.props.fillStyle\n    ctx.textBaseline = 'top'\n\n    ctx.font = `${fontSize * dpi}px Arial`\n\n    this.props.coordinates = new YccMathRect(0, 0, ctx.measureText(this.props.value).width / dpi, fontSize).getCoordinates()\n    const transformed = this.getWorldContainer()!\n\n    ctx.fillText(this.props.value, transformed.worldAnchor.x, transformed.worldAnchor.y)\n    ctx.restore()\n  }\n}\n", "import { YccMathDot } from './tools/YccMath'\nimport { YccStage } from './Ycc'\nimport YccUI from './ui/YccUI'\n\n/**\n * \u56FE\u5C42\u7684\u5916\u90E8\u5C5E\u6027\n */\ninterface LayerOpt {\n  /**\n   * \u56FE\u5C42\u7684\u540D\u79F0\n   */\n  name: string\n  /**\n   * \u56FE\u5C42\u7684\u7C7B\u578B\uFF0C\u9ED8\u8BA4\u4E3A'ui'\n   */\n  type?: 'ui' | 'debug'\n\n  /**\n   * \u662F\u5426\u5141\u8BB8\u5E27\u52A8\u753B\u4E8B\u4EF6\u7684\u76D1\u542C\n   */\n  enableFrameEvent: boolean\n}\n\nexport default class YccLayer {\n  /**\n   * \u76F8\u5BF9\u4E8E\u821E\u53F0\u7684\u4F4D\u7F6E\uFF0C\u4EE5\u5DE6\u4E0A\u89D2\u4E3A\u51C6\n   * @attention \u6B64\u5750\u6807\u4E3A\u5B9E\u9645\u7684\u7269\u7406\u50CF\u7D20\n   */\n  position = new YccMathDot()\n\n  uiList: YccUI[]\n  ctx: CanvasRenderingContext2D\n  id: number\n  type: 'ui' | 'debug'\n  name: string\n\n  show: boolean\n  ghost: boolean\n  enableEventManager: boolean\n  enableFrameEvent: boolean\n  onFrameComing: () => void\n  stage: YccStage\n\n  constructor (stage: YccStage, option?: LayerOpt) {\n    /**\n     * \u56FE\u5C42\u6240\u5C5E\u7684\u821E\u53F0\n     */\n    this.stage = stage\n\n    /**\n     * \u5B58\u50A8\u56FE\u5C42\u4E2D\u7684\u6240\u6709UI\u3002UI\u7684\u987A\u5E8F\uFF0C\u5373\u4E3A\u56FE\u5C42\u4E2D\u7684\u6E32\u67D3\u987A\u5E8F\u3002\n     */\n    this.uiList = []\n\n    /**\n     * \u5F53\u524D\u56FE\u5C42\u7684\u7ED8\u56FE\u73AF\u5883\n     * @type {CanvasRenderingContext2D}\n     */\n    this.ctx = stage.createCanvasByStage().getContext('2d')!\n\n    /**\n     * \u56FE\u5C42id\n     */\n    this.id = layerIndex++\n\n    /**\n     * \u56FE\u5C42\u7C7B\u578B\u3002\n     * `ui`\u8868\u793A\u7528\u4E8E\u7ED8\u56FE\u7684\u56FE\u5C42\u3002`tool`\u8868\u793A\u8F85\u52A9\u7684\u5DE5\u5177\u56FE\u5C42\u3002`text`\u8868\u793A\u6587\u5B57\u56FE\u5C42\u3002\n     * \u9ED8\u8BA4\u4E3A`ui`\u3002\n     */\n    this.type = 'ui'\n\n    /**\n     * \u56FE\u5C42\u540D\u79F0\n     * @type {string}\n     */\n    this.name = ((option?.name) != null) ? option?.name : ('\u56FE\u5C42_' + this.type + '_' + this.id.toString())\n\n    /**\n     * \u56FE\u5C42\u662F\u5426\u663E\u793A\n     */\n    this.show = true\n\n    /**\n     * \u56FE\u5C42\u662F\u5426\u5E7D\u7075\uFF0C\u5E7D\u7075\u72B6\u6001\u7684\u56FE\u5C42\uFF0CgetUIFromPointer \u4F1A\u76F4\u63A5\u8DF3\u8FC7\u6574\u4E2A\u56FE\u5C42\n     * @type {boolean}\n     */\n    this.ghost = false\n\n    /**\n     * \u662F\u5426\u76D1\u542C\u821E\u53F0\u7684\u4E8B\u4EF6\u3002\u7528\u4E8E\u63A7\u5236\u821E\u53F0\u4E8B\u4EF6\u662F\u5426\u5E7F\u64AD\u81F3\u56FE\u5C42\u3002\u9ED8\u8BA4\u5173\u95ED\n     * @type {boolean}\n     */\n    this.enableEventManager = false\n\n    /**\n     * \u662F\u5426\u63A5\u6536\u6BCF\u5E27\u66F4\u65B0\u7684\u901A\u77E5\u3002\u9ED8\u8BA4\u4E3Afalse\n     * @type {boolean}\n     */\n    this.enableFrameEvent = false\n\n    /**\n     * \u82E5\u63A5\u6536\u901A\u77E5\uFF0C\u6B64\u51FD\u6570\u4E3A\u63A5\u6536\u901A\u77E5\u7684\u56DE\u8C03\u51FD\u6570\u3002\u5F53\u4E14\u4EC5\u5F53enableFrameEvent\u4E3Atrue\u65F6\u751F\u6548\n     * @type {function}\n     */\n    this.onFrameComing = function () { }\n  }\n\n  /**\n * \u6DFB\u52A0\u4E00\u4E2AUI\u56FE\u5F62\u81F3\u56FE\u5C42\n */\n  addUI (ui: YccUI) {\n    this.uiList.push(ui)\n    return ui\n  }\n}\n\n// \u56FE\u5C42\u7684\u81EA\u589Eid\nlet layerIndex = 0\n// \u521B\u5EFA\u7684\u6240\u6709\u56FE\u5C42\nconst layerList: YccLayer[] = []\n\n/**\n * \u521B\u5EFA\u4E00\u4E2A\u56FE\u5C42\n * @param {YccStage} stage \u821E\u53F0\n * @param opt\n */\nexport function createLayer (stage: YccStage, opt?: LayerOpt) {\n  const layer = new YccLayer(stage, opt)\n  layerList.push(layer)\n  return layer\n}\n\n/**\n   * \u91CA\u653Elayer\u7684\u5185\u5B58\uFF0C\u7B49\u5F85GC\n   * \u5C06\u6240\u6709\u5F15\u7528\u5C5E\u6027\u7F6E\u4E3Anull\n   * @param layer\n   */\nexport function releaseLayer (layer: YccLayer) {\n  layer.uiList = []\n\n  layer.show = false\n\n  layer.enableEventManager = false\n\n  layer.enableFrameEvent = false\n\n  layer.onFrameComing = () => { }\n}\n\n/**\n * \u83B7\u53D6\u6240\u6709\u5DF2\u521B\u5EFA\u7684\u56FE\u5C42\n * @returns\n */\nexport function getAllLayer () {\n  return layerList\n}\n", "/**\n * \u821E\u53F0\u7C7B\uFF0C\u4E00\u4E2AYcc\u5E94\u7528\u6709\u4E14\u4EC5\u6709\u4E00\u4E2A\u821E\u53F0\uFF0C\u7528\u4E8E\u7ED8\u5236\n * \u821E\u53F0\u5305\u542B\u591A\u4E2A\u56FE\u5C42`Layer`\n */\n\nimport { createCanvas } from './tools/YccPolyfill'\nimport Ycc, { YccLayer } from './Ycc'\nimport { createLayer, getAllLayer } from './YccLayer'\n\nexport default class YccStage {\n  /**\n   * Ycc\u7684\u5F15\u7528\n   */\n  yccInstance: Ycc\n\n  /**\n   * \u821E\u53F0\u7684\u7ED8\u56FE\u73AF\u5883\n   */\n  stageCanvas: HTMLCanvasElement\n  stageCanvasCtx: CanvasRenderingContext2D\n\n  /**\n   * \u821E\u53F0\u7684\u9ED8\u8BA4\u56FE\u5C42\n   */\n  defaultLayer: YccLayer\n\n  /**\n   * \u821E\u53F0\u7684\u7EC8\u7AEF\u8BBE\u5907\u4FE1\u606F\n   */\n  stageInfo = this.getSystemInfo()\n\n  constructor (ycc: Ycc) {\n    this.yccInstance = ycc\n\n    // \u821E\u53F0\u521D\u59CB\u5316\n    this.stageCanvas = this.createCanvasByStage()\n    this.stageCanvasCtx = this.stageCanvas.getContext('2d')!\n\n    // \u521D\u59CB\u5316\u9ED8\u8BA4\u56FE\u5C42\n    this.defaultLayer = createLayer(this, { name: '\u821E\u53F0\u9ED8\u8BA4\u56FE\u5C42', enableFrameEvent: true })\n  }\n\n  /**\n   * \u6E05\u7A7A\u821E\u53F0\n   * @param withLayerCanvas \u662F\u5426\u8FDE\u5E26\u56FE\u5C42\u7684canvas\u4E00\u8D77\u6E05\u7A7A\n   */\n  clearStage (withLayerCanvas: boolean = true) {\n    const dpi = this.stageInfo.dpi\n    this.stageCanvasCtx.clearRect(0, 0, this.stageInfo.width * dpi, this.stageInfo.height * dpi)\n    if (withLayerCanvas) {\n      getAllLayer().forEach(layer => {\n        layer.ctx.clearRect(0, 0, this.stageInfo.width * dpi, this.stageInfo.height * dpi)\n      })\n    }\n  }\n\n  /**\n   * \u6839\u636E\u821E\u53F0\u4FE1\u606F\uFF0C\u521B\u5EFA\u4E00\u4E2A\u8986\u76D6\u5168\u821E\u53F0\u7684canvas\n   */\n  createCanvasByStage () {\n    return createCanvas({\n      ...this.stageInfo\n    })\n  }\n\n  /**\n   * \u6839\u636Eui\u7684\u540D\u79F0\u83B7\u53D6\u821E\u53F0\u4E0A\u7684ui\n   * @param name\n   * @returns\n   */\n  getElementByName (name: string) {\n    const layers = getAllLayer()\n    for (let index = 0; index < layers.length; index++) {\n      const layer = layers[index]\n      const uiList = layer.uiList\n      for (let i = 0; i < uiList.length; i++) {\n        const ui = uiList[i]\n        if (ui.props.name === name) return ui\n      }\n    }\n  }\n\n  /**\n   *\n   * @param dot\n   * @param uiIsShow\n   * @returns\n   */\n  // getUIFromPointer (dot: YccMathDot, uiIsShow: boolean) {\n  //   const self = this.ycc\n  //   uiIsShow = isBoolean(uiIsShow) ? uiIsShow : true\n  //   // \u4ECE\u6700\u672B\u4E00\u4E2A\u56FE\u5C42\u5F00\u59CB\u5BFB\u627E\n  //   for (let j = self.layerList.length - 1; j >= 0; j--) {\n  //     const layer = self.layerList[j]\n  //     // \u5E7D\u7075\u56FE\u5C42\uFF0C\u76F4\u63A5\u8DF3\u8FC7\n  //     if (layer.ghost) continue\n  //     if (uiIsShow && !layer.show) continue\n  //     const ui = layer.getUIFromPointer(dot, uiIsShow)\n  //     if (ui) { return ui }\n  //   }\n  //   return null\n  // }\n\n  /**\n   * \u83B7\u53D6\u7CFB\u7EDF\u4FE1\u606F\uFF1Adpi\u3001\u9AD8\u3001\u5BBD\uFF0C\u7B49\n   * @returns\n   */\n  getSystemInfo () {\n    const dpi = window.devicePixelRatio ?? 1\n    return {\n      width: window.innerWidth,\n      height: window.innerHeight,\n      dpi,\n      renderWidth: window.innerWidth * dpi,\n      renderHeight: window.innerWidth * dpi\n    }\n  }\n\n  /**\n   * \u7ED8\u5236\u6240\u6709\u56FE\u5C42\u7684\u6240\u6709\u5143\u7D20\n   */\n  renderAll () {\n    const { dpi } = this.stageInfo\n    // \u904D\u5386\u6240\u6709\u56FE\u5C42\n    getAllLayer().forEach(layer => {\n      layer.uiList.forEach(ui => {\n        // \u7ED8\u5236\u80CC\u666F\n        ui.renderBg()\n        // \u5C06\u79BB\u5C4F\u56FE\u5C42\u7ED8\u5236\u5230\u821E\u53F0\u6765\n        this.stageCanvasCtx.drawImage(layer.ctx.canvas, 0, 0, this.stageInfo.width * dpi, this.stageInfo.height * dpi, 0, 0, this.stageInfo.width * dpi, this.stageInfo.height * dpi)\n        ui.render()\n        // debug \u7ED8\u5236\u951A\u70B9\n        ui.renderAnchor()\n        // \u5C06\u79BB\u5C4F\u56FE\u5C42\u7ED8\u5236\u5230\u821E\u53F0\u6765\n        this.stageCanvasCtx.drawImage(layer.ctx.canvas, 0, 0, this.stageInfo.width * dpi, this.stageInfo.height * dpi, 0, 0, this.stageInfo.width * dpi, this.stageInfo.height * dpi)\n      })\n\n      // \u5C06\u79BB\u5C4F\u56FE\u5C42\u7ED8\u5236\u5230\u821E\u53F0\u6765\n      this.stageCanvasCtx.drawImage(layer.ctx.canvas, 0, 0, this.stageInfo.width * dpi, this.stageInfo.height * dpi, 0, 0, this.stageInfo.width * dpi, this.stageInfo.height * dpi)\n    })\n  }\n}\n", "import { LoaderResult } from './tools/YccLoader'\nimport YccLayer from './YccLayer'\nimport YccStage from './YccStage'\n\nexport {\n  YccLayer,\n  YccStage\n}\n\n/**\n * \u6574\u4E2AYcc\u5E94\u7528\u7684\u914D\u7F6E\u9879\n */\nexport interface YccConfig {\n  /**\n   * \u6574\u4E2A\u5E94\u7528\u6240\u8FD0\u884C\u7684\u73AF\u5883 \u9ED8\u8BA4\uFF1Ah5 <br> h5-\u666E\u901Aweb\u5E94\u7528\u3001wxapp-\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F\u3001wxgame-\u5FAE\u4FE1\u5C0F\u6E38\u620F\n   */\n  appenv: 'h5' | 'wxapp' | 'wxgame'\n\n  /**\n   * \u8C03\u8BD5\u53C2\u6570\uFF0C\u662F\u5426\u663E\u793A\u6240\u6709UI\u7684\u5BB9\u7EB3\u533A\u57DF\n   */\n  debugDrawContainer?: boolean\n}\n\nexport default class Ycc {\n  /**\n   * \u542F\u52A8\u53C2\u6570\n   */\n  $config!: YccConfig\n  /**\n   * \u6570\u636E\u72B6\u6001\n   */\n  $state?: object\n\n  /**\n   * \u52A0\u8F7D\u7684\u8D44\u6E90\n   */\n  $resouces!: LoaderResult\n\n  /**\n   * \u821E\u53F0\uFF0C\u552F\u4E00\uFF0C\u4E00\u4E2A`Ycc`\u5BF9\u5E94\u4E00\u4E2A`Stage`\n   */\n  stage: YccStage\n\n  constructor (config?: Partial<YccConfig>) {\n    const defaultConfig: YccConfig = {\n      appenv: 'h5',\n      debugDrawContainer: false\n    }\n    this.$config = Object.assign(defaultConfig, config)\n\n    this.stage = new YccStage(this)\n  }\n\n  /**\n   * \u542F\u52A8\n   * @param {Resource[]} resources \u5DF2\u52A0\u8F7D\u5B8C\u6210\u7684\u8D44\u6E90\n   */\n  bootstrap (resources: LoaderResult) {\n    this.$resouces = resources\n    this.created()\n  }\n\n  /**\n   * \u6839\u636E\u8D44\u6E90\u540D\u79F0\u83B7\u53D6\u8D44\u6E90\n   * @param resName\n   */\n  getRes (resName: string) {\n    const res = this.$resouces.resMap[resName]\n    return res\n  }\n\n  /**\n   * \u5E94\u7528\u7684\u5165\u53E3\n   * @overwrite\n   */\n  created () {}\n\n  /**\n   * \u6E32\u67D3\u51FD\u6570\n   * @overwrite\n   */\n  render () {}\n}\n", "/**\n * \u4E0E\u73AF\u5883\u65E0\u5173\u7684\u6240\u6709\u65B9\u6CD5\n */\n\n/**\n* \u5224\u65AD\u5B57\u7B26\u4E32\n* @param str\n* @return {boolean}\n*/\nexport const isString = function (str: any) {\n  return typeof (str) === 'string'\n}\n\n/**\n* \u5224\u65AD\u6570\u5B57\n* @param str\n* @return {boolean}\n*/\nexport const isNum = function (str: any) {\n  return typeof (str) === 'number'\n}\n\n/**\n* \u5224\u65ADboolean\n* @param str\n* @return {boolean}\n*/\nexport const isBoolean = function (str: any) {\n  return typeof (str) === 'boolean'\n}\n\n/**\n* \u5224\u65AD\u5BF9\u8C61\n* @param str\n* @return {boolean}\n*/\nexport const isObj = function (str: any) {\n  return typeof (str) === 'object'\n}\n/**\n* \u5224\u65AD\u51FD\u6570\n* @param str\n* @return {boolean}\n*/\nexport const isFn = function (str: any) {\n  return typeof (str) === 'function'\n}\n\n/**\n* \u5224\u65AD\u6570\u7EC4\n* @param str\n* @return {boolean}\n*/\nexport const isArray = function (str: any) {\n  return Object.prototype.toString.call(str) === '[object Array]'\n}\n\n/**\n* \u68C0\u6D4B\u662F\u5426\u662F\u79FB\u52A8\u7AEF\n* @return {boolean}\n*/\nexport const isMobile = function () {\n  const userAgentInfo = navigator.userAgent\n  const Agents = ['Android', 'iPhone',\n    'SymbianOS', 'Windows Phone',\n    'iPad', 'iPod']\n  let flag = false\n  for (let v = 0; v < Agents.length; v++) {\n    if (userAgentInfo.indexOf(Agents[v]) > 0) {\n      flag = true\n      break\n    }\n  }\n  return flag\n}\n", "import Ycc from '../Ycc'\nimport { isFn } from './YccUtils'\n\n/**\n * \u5E27 \u79C1\u6709\u7C7B\n * @constructor\n * @param ticker {Ycc.Ticker}\n */\nclass Frame {\n  createTime: number\n  deltaTime: number\n  fps: number\n  frameCount: number\n  isRendered: boolean\n\n  constructor (ticker: YccTicker) {\n    /**\n     * \u5E27\u521B\u5EFA\u65F6\u95F4\n     * @type {number}\n     */\n    this.createTime = Date.now()\n\n    /**\n       * \u4E0E\u4E0A\u4E00\u5E27\u7684\u65F6\u95F4\u5DEE\n       * @type {number}\n       */\n    this.deltaTime = ticker.deltaTime\n\n    /**\n       * \u5B9E\u65F6\u5E27\u7387\n       * @type {number}\n       */\n    this.fps = parseInt(`${1000 / this.deltaTime}`)\n\n    /**\n       * \u5E27\u4E0B\u6807\uFF0C\u8868\u793A\u7B2C\u51E0\u5E27\n       * @type {number}\n       */\n    this.frameCount = ticker.frameAllCount\n\n    /**\n       * \u5F53\u524D\u5E27\u662F\u5426\u5DF2\u5168\u90E8\u7ED8\u5236\uFF0Cticker\u56DE\u8C03\u51FD\u6570\u53EF\u6839\u636E\u6B64\u5B57\u6BB5\u5224\u65AD\n       * \u4EE5\u6B64\u907F\u514D\u4E00\u5E27\u5185\u7684\u91CD\u590D\u7ED8\u5236\n       * @type {boolean}\n       */\n    this.isRendered = false\n  }\n}\n\n/**\n * \u7CFB\u7EDF\u5FC3\u8DF3\u7BA1\u7406\u7C7B\u3002\n * \u7BA1\u7406\u7CFB\u7EDF\u7684\u5FC3\u8DF3\uFF1B\u81EA\u5B9A\u4E49\u5E27\u4E8B\u4EF6\u7684\u5E7F\u64AD\uFF1B\u5E27\u66F4\u65B0\u56FE\u5C42\u7684\u66F4\u65B0\u7B49\u3002\n *\n * \u6CE8\uFF1A\n * \u5FC3\u8DF3\u95F4\u9694\u65F6\u95F4\u4E3A1e3/60\uFF1B\n * \u65E0\u8BBA\u5E27\u7387\u4E3A\u591A\u5C11\uFF0C\u5FC3\u8DF3\u95F4\u9694\u65F6\u95F4\u4E0D\u53D8\uFF1B\n * \u603B\u5E27\u6570<=\u603B\u5FC3\u8DF3\u6B21\u6570\uFF1B\n * \u53EA\u6709\u5F53\u603B\u5E27\u6570*\u6BCF\u5E27\u7684\u7406\u8BBA\u65F6\u95F4\u5C0F\u4E8E\u603B\u5FC3\u8DF3\u65F6\u95F4\uFF0C\u5E27\u7684\u76D1\u542C\u51FD\u6570\u624D\u4F1A\u89E6\u53D1\uFF0C\u4EE5\u6B64\u6765\u63A7\u5236\u5E27\u7387\uFF1B\n *\n * @param yccInstance\n * @constructor\n */\nexport default class YccTicker {\n  yccInstance: Ycc\n  currentFrame?: Frame\n  startTime: number\n  lastFrameTime: number\n  lastFrameTickerCount: number\n  deltaTime: number\n  deltaTimeExpect: number\n  deltaTimeRatio: number\n  frameListenerList: Array<(frame: Frame) => void>\n  defaultFrameRate: number\n  defaultDeltaTime: number\n  tickerSpace: number\n  frameAllCount: number\n  timerTickCount: number\n  _timerId: number\n  _isRunning: boolean\n\n  constructor (yccInstance: Ycc) {\n    /**\n   * ycc\u5B9E\u4F8B\u7684\u5F15\u7528\n   * @type {Ycc}\n   */\n    this.yccInstance = yccInstance\n\n    /**\n       * \u5F53\u524D\u5E27\n       * @type {Frame}\n       */\n    this.currentFrame = undefined\n\n    /**\n       * \u542F\u52A8\u65F6\u95F4\u6233\n       * @type {number}\n       */\n    this.startTime = Date.now()\n\n    /**\n       * \u4E0A\u4E00\u5E27\u5237\u65B0\u7684\u65F6\u95F4\u6233\n       * @type {number}\n       */\n    this.lastFrameTime = this.startTime\n\n    /**\n       * \u4E0A\u4E00\u5E27\u5237\u65B0\u65F6\u7684\u5FC3\u8DF3\u6570\n       * @type {number}\n       */\n    this.lastFrameTickerCount = 0\n\n    /**\n       * \u5F53\u524D\u5E27\u4E0E\u4E0A\u4E00\u5E27\u7684\u5237\u65B0\u7684\u65F6\u95F4\u5DEE\n       * @type {number}\n       */\n    this.deltaTime = 0\n\n    /**\n       * \u5F53\u524D\u5E27\u4E0E\u4E0A\u4E00\u5E27\u65F6\u95F4\u5DEE\u7684\u671F\u671B\u503C\uFF08\u6839\u636E\u5E27\u7387\u8BA1\u7B97\u800C\u6765\u7684\uFF09\n       * @type {number}\n       */\n    this.deltaTimeExpect = 0\n\n    /**\n       * \u5B9E\u9645\u5E27\u95F4\u9694\u4E0E\u671F\u671B\u5E27\u95F4\u9694\u7684\u65F6\u95F4\u6BD4\n       * @type {number}\n       */\n    this.deltaTimeRatio = 1\n\n    /**\n       * \u6240\u6709\u81EA\u5B9A\u4E49\u7684\u5E27\u76D1\u542C\u51FD\u6570\u5217\u8868\n       * @type {function[]}\n       */\n    this.frameListenerList = []\n\n    /**\n       * \u9ED8\u8BA4\u5E27\u7387\n       * @type {number}\n       */\n    this.defaultFrameRate = 60\n\n    /**\n       * \u9ED8\u8BA4\u5E27\u95F4\u9694\n       * @type {number}\n       */\n    this.defaultDeltaTime = 1e3 / this.defaultFrameRate\n\n    /**\n       * \u6BCF\u5E27\u4E4B\u95F4\u95F4\u9694\u7684\u5FC3\u8DF3\u6570\n       * @type {number}\n       */\n    this.tickerSpace = 1\n\n    /**\n       * \u603B\u5E27\u6570\n       * @type {number}\n       */\n    this.frameAllCount = 0\n\n    /**\n       * \u603B\u5FC3\u8DF3\u6B21\u6570\n       * @type {number}\n       */\n    this.timerTickCount = 0\n\n    /**\n       * \u5B9A\u65F6\u5668ID\u3002\u7528\u4E8E\u505C\u6B62\u5FC3\u8DF3\u3002\n       * @type {number}\n       * @private\n       */\n    this._timerId = 0\n\n    /**\n       * \u5FC3\u8DF3\u662F\u5426\u5DF2\u7ECF\u542F\u52A8\n       * @type {boolean}\n       * @private\n       */\n    this._isRunning = false\n  }\n\n  /**\n     * \u5B9A\u65F6\u5668\u5F00\u59CB\n     * @param [frameRate] \u5FC3\u8DF3\u9891\u7387\uFF0C\u5373\u5E27\u7387\n     * \u53EF\u53D6\u503C\u6709[60,30,20,15]\n     */\n  start (frameRate: number) {\n    // \u517C\u5BB9wxapp\u5904\u7406\n    let timer = this.yccInstance.stage.stageCanvas.requestAnimationFrame ? this.yccInstance.stage.stageCanvas.requestAnimationFrame : (requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame)\n    const self = this\n\n    // \u91CD\u7F6E\u72B6\u6001\n    self.currentFrame = undefined\n    self.timerTickCount = 0\n    self.lastFrameTickerCount = 0\n\n    // \u6B63\u5E38\u8BBE\u7F6E\u7684\u5E27\u7387\n    frameRate = frameRate || self.defaultFrameRate\n    // \u6BCF\u5E27\u4E4B\u95F4\u7684\u5FC3\u8DF3\u95F4\u9694\uFF0C\u9ED8\u8BA4\u4E3A1\n    self.tickerSpace = parseInt(`${60 / frameRate}`) || 1\n\n    // \u6BCF\u5E27\u7406\u8BBA\u7684\u95F4\u9694\u65F6\u95F4\n    self.deltaTimeExpect = 1000 / frameRate\n\n    // \u521D\u59CB\u5E27\u6570\u91CF\u8BBE\u4E3A0\n    self.frameAllCount = 0\n\n    // \u542F\u52A8\u65F6\u95F4\n    self.startTime = Date.now()\n\n    // \u6B63\u5728\u8FDB\u884C\u4E2D \u4E0D\u518D\u542F\u52A8\u5FC3\u8DF3\n    if (self._isRunning) return this\n\n    // timer\u517C\u5BB9\n    timer || (timer = function (callback: (curTime: number) => void) {\n      return setTimeout(function () {\n        callback(Date.now())\n      }, 1e3 / 60)\n    }\n    )\n    // \u542F\u52A8\u5FC3\u8DF3\n    // self._timerId = timer.call(window, cb);\n    self._timerId = timer(cb)\n    self._isRunning = true\n\n    // \u5FC3\u8DF3\u56DE\u8C03\u51FD\u6570\u3002\u7EA660fps\n    function cb (curTime: number) {\n      // \u603B\u7684\u5FC3\u8DF3\u6570\u52A01\n      self.timerTickCount++\n      if (self.timerTickCount - self.lastFrameTickerCount === self.tickerSpace) {\n        // \u8BBE\u7F6E \u603B\u5E27\u6570\u52A01\n        self.frameAllCount++\n        // \u8BBE\u7F6E \u4E24\u5E27\u7684\u65F6\u95F4\u5DEE\n        self.deltaTime = curTime - self.lastFrameTime\n        // \u8BBE\u7F6E \u5E27\u95F4\u9694\u7F29\u653E\u6BD4\n        self.deltaTimeRatio = self.deltaTime / self.deltaTimeExpect\n        // \u8BBE\u7F6E \u4E0A\u4E00\u5E27\u5237\u65B0\u65F6\u95F4\n        self.lastFrameTime += self.deltaTime\n        // \u8BBE\u7F6E \u4E0A\u4E00\u5E27\u5237\u65B0\u65F6\u7684\u5FC3\u8DF3\u6570\n        self.lastFrameTickerCount = self.timerTickCount\n        // \u6784\u9020\u4E00\u5E27\n        self.currentFrame = new Frame(self)\n        // \u6267\u884C\u6240\u6709\u81EA\u5B9A\u4E49\u7684\u5E27\u76D1\u542C\u51FD\u6570\n        self._broadcastFrameEvent(self.currentFrame)\n        // // \u6267\u884C\u6240\u6709\u56FE\u5C42\u7684\u5E27\u76D1\u542C\u51FD\u6570\n        // self.broadcastToLayer(self.currentFrame)\n      }\n\n      // \u9012\u5F52\u8C03\u7528\u5FC3\u8DF3\u51FD\u6570\n      // self._timerId = timer.call(window,cb);\n      self._timerId = timer(cb)\n    }\n\n    return this\n  }\n\n  /**\n     * \u505C\u6B62\u5FC3\u8DF3\n     */\n  stop () {\n    // \u517C\u5BB9wxapp\u5904\u7406\n    let stop = this.yccInstance.stage.stageCanvas.cancelAnimationFrame ? this.yccInstance.stage.stageCanvas.cancelAnimationFrame : (cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame)\n    stop || (stop = function (id: number) {\n      clearTimeout(id)\n    })\n    stop(this._timerId)\n    this._isRunning = false\n    this.currentFrame = undefined\n  }\n\n  /**\n     * \u7ED9\u6BCF\u5E27\u6DFB\u52A0\u81EA\u5B9A\u4E49\u7684\u76D1\u542C\u51FD\u6570\n     * @param listener\n     */\n  addFrameListener (listener: (frame: Frame) => void) {\n    this.frameListenerList.push(listener)\n    return this\n  }\n\n  /**\n     * \u79FB\u9664\u67D0\u4E2A\u76D1\u542C\u51FD\u6570\n     * @param listener\n     */\n  removeFrameListener (listener: () => void) {\n    const index = this.frameListenerList.indexOf(listener)\n    if (index !== -1) { this.frameListenerList.splice(index, 1) }\n    return this\n  }\n\n  /**\n     * \u6267\u884C\u6240\u6709\u81EA\u5B9A\u4E49\u7684\u5E27\u76D1\u542C\u51FD\u6570\n     */\n  private _broadcastFrameEvent (frame: Frame) {\n    for (let i = 0; i < this.frameListenerList.length; i++) {\n      const listener = this.frameListenerList[i]\n      isFn(listener) && listener(frame)\n    }\n  }\n\n  // /**\n  //    * \u6267\u884C\u6240\u6709\u56FE\u5C42\u7684\u76D1\u542C\u51FD\u6570\n  //    */\n  // broadcastToLayer (frame: Frame) {\n  //   for (let i = 0; i < this.yccInstance.layerList.length; i++) {\n  //     const layer = this.yccInstance.layerList[i]\n  //     layer.show && layer.enableFrameEvent && layer.onFrameComing(frame)\n  //   }\n  // }\n}\n", "import { YccMathRect } from '../tools/YccMath'\nimport YccLayer from '../YccLayer'\nimport YccUI, { getYccUICommonProps, YccUICommonProps } from './YccUI'\n\n/**\n * Image\u5C5E\u6027\uFF0C\u7EE7\u627F\u81EA\u516C\u7528\u5C5E\u6027\n */\nexport interface YccUIImageProps extends YccUICommonProps {\n  /**\n   * \u56FE\u7247\u8D44\u6E90\u7684\u540D\u79F0\uFF0C\u5BF9\u5E94`Loader`\u7684\u8D44\u6E90\u540D\u79F0\n   */\n  resName: string\n\n  /**\n   * \u5BB9\u7EB3\u533A\n   * \u76F8\u5BF9\u5750\u6807\uFF0C\u76F8\u5BF9\u4E8Eanchor\uFF0C\u5176\u50CF\u7D20\u4E3A\u7269\u7406\u50CF\u7D20\n   * \u6B64\u5C5E\u6027\u662F\u4E00\u4E2A\u76F8\u5BF9\u5750\u6807\uFF0C\u76F8\u5BF9\u4E8E\u951A\u70B9\u5750\u6807\n   */\n  rect: YccMathRect\n\n  /**\n   * \u586B\u5145\u6A21\u5F0F\n   *     <br> none       -- \u65E0\u586B\u5145\u65B9\u5F0F\u3002\u5DE6\u4E0A\u89D2\u5BF9\u9F50\uFF0C\u8D85\u51FA\u9690\u85CF\uFF0C\u4E0D\u4FEE\u6539rect\u5927\u5C0F\u3002\n   *     <br> repeat     -- \u91CD\u590D\u3002\u5DE6\u4E0A\u89D2\u5BF9\u9F50\uFF0C\u91CD\u590D\u5E73\u94FA\u56FE\u7247\uFF0C\u4E0D\u4FEE\u6539rect\u5927\u5C0F\uFF0C\u8D85\u51FA\u9690\u85CF\u3002\n   *     <br> scale       -- \u7F29\u653E\u3002\u5DE6\u4E0A\u89D2\u5BF9\u9F50\uFF0C\u7F29\u653E\u81F3\u6574\u4E2Arect\u533A\u57DF\uFF0C\u4E0D\u4FEE\u6539rect\u5927\u5C0F\u3002\n   *     <br> auto       -- \u81EA\u52A8\u3002\u5DE6\u4E0A\u89D2\u5BF9\u9F50\uFF0Crect\u5927\u5C0F\u81EA\u52A8\u9002\u914D\u56FE\u7247\u3002\u82E5\u56FE\u7247\u8D85\u51FArect\uFF0C\u4F1A\u52A8\u6001\u4FEE\u6539rect\u5927\u5C0F\u3002\n   *     <br> scale9Grid   -- 9\u5BAB\u683C\u6A21\u5F0F\u586B\u5145\u3002\u5DE6\u4E0A\u89D2\u5BF9\u9F50\uFF0C\u4E2D\u95F4\u533A\u57DF\u5C06\u62C9\u4F38\uFF0C\u4E0D\u5141\u8BB8\u56FE\u7247\u8D85\u51FArect\u533A\u57DF\u5927\u5C0F\uFF0C\u4E0D\u4F1A\u4FEE\u6539rect\u5927\u5C0F\u3002\n   */\n  fillMode: 'none' | 'repeat' | 'scale' | 'auto' | 'scale9Grid'\n  /**\n   * 9\u5BAB\u683C\u76F8\u5BF9\u4E8Eres\u56FE\u7247\u7684\u4E2D\u95F4\u533A\u57DF\uFF0C\u5F53\u4E14\u4EC5\u5F53fillMode\u4E3Ascale9Grid\u6709\u6548\n   */\n  scale9GridRect?: YccMathRect\n  /**\n   * \u5C06\u56FE\u7247\u955C\u50CF\u7ED8\u5236\u65B9\u5F0F\n   * <br> 0 -- \u65E0\n   * <br> 1-- \u4E0A\u4E0B\u98A0\u5012\n   * <br> 2 -- \u5DE6\u53F3\u7FFB\u8F6C\n   * <br> 3 -- \u4E0A\u4E0B\u5DE6\u53F3\u98A0\u5012\n   */\n  mirror: 0 | 1 | 2 | 3\n}\n\n/**\n * \u56FE\u7247UI\n * \u56FE\u7247\u7684\u5C3A\u5BF8\u4F1A\u6839\u636E\u8BBE\u5907\u7684dpi\u52A8\u6001\u8C03\u6574\n */\nexport default class ImageUI extends YccUI<YccUIImageProps> {\n  getDefaultProps (): YccUIImageProps {\n    const rect = new YccMathRect(0, 0, 60, 60)\n    return {\n      ...getYccUICommonProps(),\n      resName: '',\n      rect,\n      fillMode: 'none',\n      mirror: 0,\n      /**\n       * \u9876\u70B9\u8F6C\u6362\n       */\n      coordinates: rect.getCoordinates()\n    }\n  }\n\n  /**\n   * \u6DFB\u52A0\u81F3\u56FE\u5C42\u65F6\uFF0C\u91CD\u65B0\u8BA1\u7B97\u5C5E\u6027\n   * @param layer\n   * @returns\n   */\n  created (layer: YccLayer) {\n    super.created(layer)\n\n    // \u521D\u59CB\u5316\u5BB9\u7EB3\u533A\n    this.props.coordinates = this.props.rect.getCoordinates()\n    // auto\u6A21\u5F0F\u91CD\u65B0\u7ED9props\u8D4B\u503C\n    if (this.props.fillMode === 'auto') {\n      const img = this.getRes()\n      this.props.rect.width = img.width as number\n      this.props.rect.height = img.height as number\n      this.props.coordinates = this.props.rect.getCoordinates()\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u8D44\u6E90\n   * @returns\n   */\n  getRes () {\n    const ycc = this.getYcc()!\n    return ycc.$resouces.resMap[this.props.resName].element as CanvasImageSource\n  }\n\n  /**\n   * \u5904\u7406\u955C\u50CF\n   * @param renderRect {YccMathRect} \u8BA1\u7B97\u4E4B\u540E\u7684\u56FE\u7247\u5BB9\u7EB3\u533A\n   * @private\n   */\n  private _processMirror (renderRect: YccMathRect) {\n    const mirror = this.props.mirror\n    const ctx = this.getContext()!\n    const { x, y, width, height } = renderRect\n\n    if (mirror === 1) {\n      ctx.scale(-1, 1)\n      ctx.translate(-x * 2 - width, 0)\n    }\n    if (mirror === 2) {\n      ctx.scale(1, -1)\n      ctx.translate(0, -y * 2 - height)\n    }\n    if (mirror === 3) {\n      ctx.scale(-1, -1)\n      ctx.translate(-x * 2 - width, -y * 2 - height)\n    }\n  }\n\n  /**\n   * \u7ED8\u5236\u51FD\u6570\n   */\n  render (): void {\n    if (!this.isDrawable() || !this.props.show) return\n    const ctx = this.getContext()!\n    const dpi = this.getDpi()\n    // \u521D\u59CB\u5316\u4F4D\u7F6E\n    this.props.coordinates = this.props.rect.getCoordinates()\n\n    const img = this.getRes()\n    // \u7ED8\u5236\u5C3A\u5BF8\n    const renderImgWidth = img.width as number\n    const renderImgHeight = img.height as number\n    // \u7269\u7406\u5C3A\u5BF8\n    const imgWidth = renderImgWidth / dpi\n    const imgHeight = renderImgHeight / dpi\n\n    // \u7269\u7406\u5750\u6807\u8F6C\n    const transformed = this.getWorldContainer(this.props.rect)!\n    const worldAnchor = transformed.worldAnchor // \u951A\u70B9\n    const rect = this.props.rect // \u7269\u7406\u533A\n    const renderRect = transformed.render.renderRect! // \u7ED8\u5236\u533A\n\n    ctx.save()\n    // \u5904\u7406\u65CB\u8F6C\uFF1A\u65CB\u8F6C\u7684\u4E2D\u5FC3\u70B9\u4E3AUI\u7684\u951A\u70B9\n    ctx.translate(worldAnchor.x, worldAnchor.y)\n    ctx.rotate(this.props.rotation * Math.PI / 180)\n    ctx.translate(-worldAnchor.x, -worldAnchor.y)\n\n    // \u5904\u7406\u955C\u50CF\n    this._processMirror(renderRect)\n\n    // \u6839\u636E\u4E0D\u540C\u7ED8\u5236\u6A21\u5F0F\uFF0C\u5F00\u59CB\u7ED8\u5236\n    if (this.props.fillMode === 'none') {\n      ctx.drawImage(img, 0, 0, rect.width, rect.height, renderRect.x, renderRect.y, renderRect.width, renderRect.height)\n    } else if (this.props.fillMode === 'scale') {\n      ctx.drawImage(img, 0, 0, img.width as number, img.height as number, renderRect.x, renderRect.y, renderRect.width, renderRect.height)\n    } else if (this.props.fillMode === 'auto') {\n      ctx.drawImage(img, 0, 0, img.width as number, img.height as number, renderRect.x, renderRect.y, renderRect.width, renderRect.height)\n    } else if (this.props.fillMode === 'repeat') {\n      const { x, y } = renderRect\n      // x,y\u65B9\u5411\u80FD\u5BB9\u7EB3\u7684img\u4E2A\u6570\n      const wCount = Math.ceil(rect.width / (imgWidth))\n      const hCount = Math.ceil(rect.height / (imgHeight))\n\n      for (let i = 0; i < wCount; i++) {\n        for (let j = 0; j < hCount; j++) {\n          let xRest = renderImgWidth\n          let yRest = renderImgHeight\n          if (i === wCount - 1) { xRest = renderRect.width - i * renderImgWidth }\n          if (j === hCount - 1) { yRest = renderRect.height - j * renderImgHeight }\n\n          ctx.drawImage(img,\n            0, 0, xRest, yRest,\n            x + renderImgWidth * i, y + renderImgHeight * j, xRest, yRest\n          )\n        }\n      }\n    } else if (this.props.fillMode === 'scale9Grid') {\n      if (!this.props.scale9GridRect) return\n\n      const rect = this.props.rect\n      const centerRect = this.props.scale9GridRect\n      const grid: Array<{ src?: YccMathRect, dest?: YccMathRect }> = []\n      const dpi = this.getDpi()\n      let src, dest\n\n      // \u7B2C1\u5757\n      grid[0] = {}\n      grid[0].src = new YccMathRect(0, 0, centerRect.x, centerRect.y)\n      grid[0].dest = new YccMathRect(rect.x, rect.y, centerRect.x, centerRect.y)\n\n      // \u7B2C3\u5757\n      grid[2] = {}\n      grid[2].src = new YccMathRect(centerRect.x + centerRect.width, 0, imgWidth - centerRect.x - centerRect.width, centerRect.y)\n      grid[2].dest = new YccMathRect(rect.width - grid[2].src.width + rect.x, rect.y, grid[2].src.width, grid[2].src.height)\n\n      // \u7B2C7\u5757\n      grid[6] = {}\n      grid[6].src = new YccMathRect(0, centerRect.y + centerRect.height, centerRect.x, imgHeight - centerRect.y - centerRect.height)\n      grid[6].dest = new YccMathRect(rect.x, rect.y + rect.height - grid[6].src.height, grid[6].src.width, grid[6].src.height)\n\n      // \u7B2C9\u5757\n      grid[8] = {}\n      grid[8].src = new YccMathRect(centerRect.x + centerRect.width, centerRect.y + centerRect.height, imgWidth - centerRect.x - centerRect.width, imgHeight - centerRect.y - centerRect.height)\n      grid[8].dest = new YccMathRect(rect.width - grid[8].src.width + rect.x, rect.y + rect.height - grid[8].src.height, grid[8].src.width, grid[8].src.height)\n\n      // \u7B2C2\u5757\n      grid[1] = {}\n      grid[1].src = new YccMathRect(centerRect.x, 0, centerRect.width, centerRect.y)\n      grid[1].dest = new YccMathRect(grid[0].dest.x + grid[0].dest.width, rect.y, rect.width - grid[0].dest.width - grid[2].dest.width, centerRect.y)\n\n      // \u7B2C4\u5757\n      grid[3] = {}\n      grid[3].src = new YccMathRect(grid[0].src.x, centerRect.y, grid[0].src.width, centerRect.height)\n      grid[3].dest = new YccMathRect(grid[0].dest.x, grid[0].dest.y + grid[0].dest.height, grid[0].dest.width, rect.height - grid[0].dest.height - grid[6].dest.height)\n\n      // \u7B2C6\u5757\n      grid[5] = {}\n      grid[5].src = new YccMathRect(grid[2].src.x, centerRect.y, grid[2].src.width, centerRect.height)\n      grid[5].dest = new YccMathRect(grid[2].dest.x, grid[3].dest.y, grid[2].dest.width, grid[3].dest.height)\n\n      // \u7B2C8\u5757\n      grid[7] = {}\n      grid[7].src = new YccMathRect(grid[1].src.x, grid[6].src.y, centerRect.width, grid[6].src.height)\n      grid[7].dest = new YccMathRect(grid[1].dest.x, grid[6].dest.y, grid[1].dest.width, grid[6].dest.height)\n\n      // \u7B2C5\u5757\n      grid[4] = {}\n      grid[4].src = new YccMathRect(centerRect.x, centerRect.y, centerRect.width, centerRect.height)\n      grid[4].dest = new YccMathRect(grid[1].dest.x, grid[5].dest.y, grid[1].dest.width, grid[5].dest.height)\n\n      // console.log(grid)\n      for (let k = 0; k < grid.length; k++) {\n        if (!grid[k]) continue\n        src = grid[k].src!.scaleBy(dpi, dpi, true)\n        dest = grid[k].dest!.scaleBy(dpi, dpi, true)\n        // console.log(src, dest)\n        ctx.drawImage(img,\n          // \u6E90\n          src.x, src.y, src.width, src.height,\n          // \u76EE\u6807\n          dest.x + worldAnchor.x, dest.y + worldAnchor.y, dest.width, dest.height\n        )\n      }\n    }\n\n    ctx.restore()\n  }\n}\n", "import { YccMathDot } from '../tools/YccMath'\nimport YccUI, { getYccUICommonProps, YccUICommonProps } from './YccUI'\n\n/**\n * Text\u5C5E\u6027\uFF0C\u7EE7\u627F\u81EA\u516C\u7528\u5C5E\u6027\n */\ninterface YccUILineProps extends YccUICommonProps {\n  /**\n   * \u6587\u672C\u5185\u5BB9\n   */\n  dots: YccMathDot[]\n\n  /**\n   * \u6587\u672C\u6837\u5F0F\n   */\n  style: {\n    color?: string\n  }\n}\n\nexport default class LineUI extends YccUI<YccUILineProps> {\n  getDefaultProps (): YccUILineProps {\n    return {\n      ...getYccUICommonProps(),\n      dots: [],\n      /**\n       * \u6B64\u5C5E\u6027\u53EA\u5728\u7ED8\u5236\u540E\u751F\u6548\n       */\n      coordinates: [\n        new YccMathDot(0),\n        new YccMathDot(0)\n      ],\n      style: {\n        color: 'red'\n      }\n    }\n  }\n\n  /**\n   * \u7ED8\u5236\u51FD\u6570\n   */\n  render (): void {\n    if (!this.isDrawable() || !this.props.show) return\n    if (this.props.dots.length < 2) return\n    const ctx = this.getContext()!\n    const dpi = this.getDpi()!\n\n    ctx.save()\n    ctx.beginPath()\n    ctx.strokeStyle = this.props.style?.color ?? this.props.strokeStyle\n    ctx.textBaseline = 'top'\n\n    const transformed = this.getWorldContainer()\n    const dots = this.props.dots.map(dot => dot.dpi(dpi).plus(transformed!.render.renderAnchor))\n\n    ctx.moveTo(dots[0].x, dots[0].y)\n    for (let index = 0; index < dots.length; index++) {\n      const dot = dots[index]\n      ctx.lineTo(dot.x, dot.y)\n    }\n    ctx.stroke()\n    ctx.closePath()\n    ctx.restore()\n  }\n}\n", "import YccUI, { getYccUICommonProps, YccUICommonProps } from './YccUI'\n\ninterface PolygonUIProps extends YccUICommonProps {\n\n}\n\n/**\n * \u591A\u8FB9\u5F62UI\n */\nexport default class PolygonUI extends YccUI<PolygonUIProps> {\n  getDefaultProps () {\n    // \u76F4\u63A5\u4F7F\u7528\u901A\u7528\u5C5E\u6027\n    return {\n      ...getYccUICommonProps()\n    }\n  }\n\n  /**\n   * \u7ED8\u5236\u51FD\u6570\n   */\n  render (): void {\n    if (!this.isDrawable() || !this.props.show) return\n\n    const ctx = this.getContext()!\n    ctx.save()\n    this.renderPath()\n    ctx.fillStyle = '#000'\n    this.props.fill ? ctx.fill() : ctx.stroke()\n    ctx.restore()\n  }\n}\n", "\nexport type Mutable<T> = {\n  -readonly [K in keyof T]: T[K]\n}\n\n/**\n * \u7CFB\u7EDF\u9ED8\u8BA4\u7684`Touch`\u4E8B\u4EF6\u5168\u90E8\u4E3A\u53EA\u8BFB\u5C5E\u6027\uFF0C\u4E0D\u65B9\u4FBF\u8FFD\u8E2A\n */\ninterface YccTouchEvent {\n  /**\n   * Touch\u4E8B\u4EF6\u5173\u8054\u7684lifeId\n   */\n  lifeId?: number\n  /**\n   * \u4E8B\u4EF6\u7C7B\u578B\n   */\n  type: 'touchstart' | 'touchmove' | 'touchend'\n  /**\n   * \u4E8B\u4EF6\u89E6\u53D1\u7684\u63A5\u89E6\u70B9\n   */\n  triggerTouch: Mutable<Touch>\n\n  /**\n   * \u4E8B\u4EF6\u89E6\u53D1\u7684\u65F6\u95F4\n   */\n  triggerTime: number\n}\n\n/**\n * \u62F7\u8D1DTouch\u7684\u6570\u636E\n * @param touches\n * @returns\n */\nfunction syncTouches (touches: TouchList): Array<Mutable<Touch>> {\n  const copedList = []\n  for (let index = 0; index < touches.length; index++) {\n    const touch = touches[index]\n    const coped = {\n      clientX: touch.clientX,\n      clientY: touch.clientY,\n      pageX: touch.pageX,\n      pageY: touch.pageY,\n      identifier: touch.identifier,\n      force: touch.force\n    } as Mutable<Touch>\n    copedList.push(coped)\n  }\n  return copedList\n}\n\n/**\n * \u89E6\u6478\u7684\u751F\u547D\u5468\u671F\n */\nexport class TouchLife {\n  /**\n   * \u81EA\u589EID\u8BB0\u5F55\n   */\n  static cacheId = 0\n  /**\n       * \u751F\u547D\u5468\u671F\u7684id\n       * @type {number}\n       * */\n  id: number\n\n  /**\n  * \u5F00\u59CB\u7684touch\u4E8B\u4EF6\n  * @type {YccTouchEvent}\n  * */\n  startTouchEvent: YccTouchEvent | null\n  /**\n  * \u7ED3\u675F\u7684touch\u4E8B\u4EF6\n  * @type {YccTouchEvent}\n  * */\n  endTouchEvent: YccTouchEvent | null\n  /**\n   * \u79FB\u52A8\u8FC7\u7A0B\u4E2D\u7684\u70B9\n   * @type {YccTouchEvent}\n   */\n  moveTouchEventList: YccTouchEvent[]\n  endTime: any\n  startTime: any\n\n  constructor (option?: Partial<TouchLife>) {\n    this.id = TouchLife.cacheId++\n\n    this.startTouchEvent = option?.startTouchEvent ?? null\n\n    this.endTouchEvent = option?.endTouchEvent ?? null\n\n    this.moveTouchEventList = option?.moveTouchEventList ?? []\n  }\n\n  addStart (ev: YccTouchEvent) {\n    ev.lifeId = this.id\n    this.startTouchEvent = ev\n    return this\n  }\n\n  addEnd (ev: YccTouchEvent) {\n    ev.lifeId = this.id\n    this.endTouchEvent = ev\n    return this\n  }\n\n  addMove (ev: YccTouchEvent) {\n    ev.lifeId = this.id\n    this.moveTouchEventList.push(ev)\n    return this\n  }\n}\n\n/**\n * \u6574\u4E2A\u5BF9\u8C61\u7684\u751F\u547D\u5468\u671F\u8FFD\u8E2A\n */\nexport default class TouchLifeTracer {\n  target: HTMLElement\n  /**\n   * \u6240\u6709\u5DF2\u7ECF\u53D1\u751F\u8FC7\u7684\u751F\u547D\u5468\u671F\n   */\n  _lifeList: TouchLife[]\n  /**\n   * \u5F53\u524D\u5B58\u6D3B\u7684\u751F\u547D\u5468\u671F\uFF0C\u6B63\u5728\u4E0Etarget\u63A5\u89E6\u7684\u89E6\u6478\u70B9\u751F\u547D\u5468\u671F\n   **/\n  currentLifeList: TouchLife[]\n  /**\n    * \u5F53\u524D\u5BF9\u8C61\u7684touch\n    * @type {Touch[]}\n    */\n  targetTouches: Touch[]\n  /**\n    * \u5F53\u524Dtarget\u6240\u6709\u7684touch\n    * @type {Array}\n    */\n  touches: Touch[]\n  /**\n    * \u5F53\u524D\u6539\u53D8\u7684\u6240\u6709touch\n    * @type {Array}\n    */\n  changedTouches: Touch[]\n  onlifestart: (life: TouchLife) => void\n  onlifechange: (life: TouchLife) => void\n  onlifeend: (life: TouchLife) => void\n\n  constructor (target: HTMLElement) {\n  /**\n     * \u8FFD\u8E2A\u7684\u5BF9\u8C61\n     * */\n    this.target = target\n\n    /**\n    * \u4F5C\u7528\u4E8Etarget\u7684\u6240\u6709\u751F\u547D\u5468\u671F\uFF0C\u5305\u542B\u5B58\u6D3B\u548C\u6B7B\u4EA1\u7684\u5468\u671F\n    * */\n    this._lifeList = []\n\n    this.currentLifeList = []\n\n    this.targetTouches = []\n\n    this.touches = []\n\n    this.changedTouches = []\n\n    /**\n    * \u67D0\u4E2A\u751F\u547D\u5468\u671F\u5F00\u59CB\n    * @type {function}\n    * @param callback(life)\n    * */\n    this.onlifestart = (life: TouchLife) => {}\n\n    /**\n    * \u67D0\u4E2A\u751F\u547D\u5468\u671F\u72B6\u6001\u53D8\u66F4\n    * @type {function}\n    * @param callback(life)\n    * */\n    this.onlifechange = (life: TouchLife) => {}\n\n    /**\n    * \u67D0\u4E2A\u751F\u547D\u5468\u671F\u5F00\u59CB\n    * @type {function}\n    * @param callback(life)\n    * */\n    this.onlifeend = (life: TouchLife) => {}\n\n    this.init()\n  }\n\n  init () {\n    if (!this.target.addEventListener) { console.error('addEventListener undefined'); return }\n    this.target.addEventListener('touchstart', this.touchstart.bind(this))\n    this.target.addEventListener('touchmove', this.touchmove.bind(this))\n    this.target.addEventListener('touchend', this.touchend.bind(this))\n  }\n\n  /**\n     * \u6DFB\u52A0\u751F\u547D\u5468\u671F\n     * @param life {TouchLife}  \u751F\u547D\u5468\u671F\n     * @return {*}\n     */\n  addLife (life: TouchLife) {\n    this._lifeList.push(life)\n  }\n\n  /**\n   * \u6839\u636Eidentifier\u67E5\u627E\u751F\u547D\u5468\u671F\uFF0C\u6B64\u65B9\u6CD5\u53EA\u80FD\u5728\u751F\u547D\u5468\u671F\u5185\u4F7F\u7528\n   * @param identifier\n   * @return {*}\n   */\n  findCurrentLifeByTouchID (identifier: number) {\n    for (let i = 0; i < this.currentLifeList.length; i++) {\n      const life = this.currentLifeList[i]\n      if (life.startTouchEvent?.triggerTouch.identifier === identifier) { return life }\n    }\n  }\n\n  /**\n   * \u6839\u636EtouchID\u5220\u9664\u5F53\u524D\u89E6\u6478\u7684\u751F\u547D\u5468\u671F\n   * @param identifier\n   * @return {boolean}\n   */\n  deleteCurrentLifeByTouchID (identifier: number) {\n    for (let i = 0; i < this.currentLifeList.length; i++) {\n      const life = this.currentLifeList[i]\n      if (life.startTouchEvent?.triggerTouch.identifier === identifier) {\n        this.currentLifeList.splice(i, 1)\n        return true\n      }\n    }\n    return false\n  }\n\n  /**\n   * \u5BFB\u627E\u79FB\u52A8\u8FC7\u7684\u63A5\u89E6\u70B9\n   */\n  indexOfTouchFromMoveTouchEventList (moveTouchEventList: YccTouchEvent[], touch: Touch) {\n    for (let i = 0; i < moveTouchEventList.length; i++) {\n      if (touch.identifier === moveTouchEventList[i].triggerTouch.identifier) { return i }\n    }\n    return -1\n  }\n\n  touchstart (e: TouchEvent) {\n    const self = this\n    if (e.preventDefault) e.preventDefault()\n    const life = new TouchLife()\n    self.addLife(life.addStart({\n      triggerTime: Date.now(),\n      triggerTouch: syncTouches(e.touches)[0],\n      type: 'touchstart'\n    }))\n    self.currentLifeList.push(life)\n    console.log('touchstart', life)\n    if (self.onlifestart) self.onlifestart(life)\n  }\n\n  touchmove (e: TouchEvent) {\n    const self = this\n    if (e.preventDefault) e.preventDefault()\n    const changedTouches = syncTouches(e.changedTouches)\n    for (let i = 0; i < changedTouches.length; i++) {\n      const touch = changedTouches[i]\n      const life = self.findCurrentLifeByTouchID(touch.identifier)!\n      life.addMove({\n        triggerTime: Date.now(),\n        triggerTouch: touch,\n        type: 'touchmove'\n      })\n      if (self.onlifechange) self.onlifechange(life)\n    }\n  }\n\n  touchend (e: TouchEvent) {\n    const self = this\n    if (e.preventDefault) e.preventDefault()\n    // self.syncTouches(e)\n    const touch = e.changedTouches[0]\n    const life = self.findCurrentLifeByTouchID(touch.identifier)!\n    life.addEnd({\n      triggerTime: Date.now(),\n      triggerTouch: { ...touch },\n      type: 'touchend'\n    })\n    self.deleteCurrentLifeByTouchID(touch.identifier)\n    if (self.onlifeend) self.onlifeend(life)\n  }\n}\n", "/**\n * @file    YccGesture.ts\n * @author  xiaohei\n * @description  YccGesture.ts\u6587\u4EF6\n * \u79FB\u52A8\u7AEF\u7684\u624B\u52BF\u7C7B\uFF0C\u5C01\u88C5\u7B80\u5355\u7684\u624B\u52BF\u64CD\u4F5C\uFF0C\u64CD\u4F5C\u53EA\u5BF9target\u5143\u7D20\u751F\u6548\uFF0C\u82E5\u9700\u8981\u8F6C\u53D1\u7ED9Ycc.UI\uFF0C\u5219\u9700\u8981\u81EA\u5DF1\u5904\u7406\n * @requires TouchLifeTracer\n */\n\nimport { YccMathVector } from './YccMath'\nimport TouchLifeTracer, { TouchLife } from './YccTouchLife'\nimport { isMobile, isNum } from './YccUtils'\n\n/**\n   *\n   * @param option\n   * @param option.target \u624B\u52BF\u89E6\u53D1\u7684HTML\u5BF9\u8C61\n   * @param option.useMulti {boolean} \u662F\u5426\u542F\u7528\u591A\u70B9\u89E6\u63A7\u3002\u5BF9\u4E8E\u65E0\u591A\u70B9\u89E6\u63A7\u7684\u9879\u76EE\uFF0C\u5173\u95ED\u591A\u70B9\u89E6\u63A7\uFF0C\u53EF\u8282\u7701\u6027\u80FD\u6D88\u8017\u3002\u9ED8\u8BA4\u542F\u7528\n   * @extends Ycc.Listener\n   * @constructor\n   */\nexport default class YccGesture {\n  option: { target: HTMLElement | null, useMulti: boolean }\n  _longTapTimeout: number\n  ismutiltouching: boolean\n  touchLifeTracer: TouchLifeTracer | null\n\n  constructor (option: { target: HTMLElement, useMulti: boolean }) {\n    /**\n       *\n       * @type {{useMulti: boolean, target: null}}\n       */\n    this.option = {\n      target: option.target,\n      useMulti: option.useMulti\n    }\n\n    /**\n       * \u957F\u6309\u4E8B\u4EF6\u7684\u5B9A\u65F6\u5668id\n       * @type {null}\n       * @private\n       */\n    this._longTapTimeout = 0\n\n    /**\n       * \u591A\u70B9\u89E6\u6478\u662F\u5426\u6B63\u5904\u4E8E\u63A5\u89E6\u4E2D\n       * @type {Bolean}\n       * @private\n       */\n    this.ismutiltouching = false\n\n    /**\n       * \u751F\u547D\u8FFD\u8E2A\n       */\n    this.touchLifeTracer = null\n\n    this._init()\n  }\n\n  _init () {\n    if (isMobile()) {\n      console.log('mobile gesture init...')\n      this._initForMobile()\n    } else {\n      console.log('pc gesture init...')\n      // this._initForPC()\n    }\n  }\n\n  /**\n     * \u5411\u5916\u90E8\u89E6\u53D1\u4E8B\u4EF6\n     * @param type\n     * @param data\n     */\n  triggerListener (type: string, data: any, data2?: any) {\n    console.log(type, data, data2)\n  }\n\n  /**\n   * \u6784\u9020\u7B5B\u9009\u4E8B\u4EF6\u4E2D\u7684\u6709\u7528\u4FE1\u606F\n   * @param event  {MouseEvent | TouchEvent}  \u9F20\u6807\u4E8B\u4EF6\u6216\u8005\u89E6\u6478\u4E8B\u4EF6\n   * @param [type] {String} \u4E8B\u4EF6\u7C7B\u578B\uFF0C\u53EF\u9009\n   * @return {{target: null, clientX: number, clientY: number, pageX: number, pageY: number, screenX: number, screenY: number, force: number}}\n   * @private\n   */\n  _createEventData (event: object, type: string) {\n    let data = {\n      /**\n         * \u4E8B\u4EF6\u7C7B\u578B\n         */\n      type: '',\n      /**\n         * \u4E8B\u4EF6\u89E6\u53D1\u5BF9\u8C61\n         */\n      target: null,\n\n      /**\n         * \u4E8B\u4EF6\u7684\u751F\u547D\u5468\u671FID\uFF0C\u53EA\u5728\u62D6\u62FD\u8FC7\u7A0B\u4E2D\u5B58\u5728\uFF0C\u5B58\u5728\u65F6\u6B64\u503C\u5927\u4E8E-1\n         * PC\u7AEF\u8868\u793Amousedown\u76F4\u81F3mouseup\u6574\u4E2A\u5468\u671F\n         * mobile\u7AEF\u8868\u793Atouchstart\u76F4\u81F3touchend\u6574\u4E2A\u5468\u671F\n         */\n      identifier: -1,\n\n      // x\u3001y\u517C\u5BB9\u5FAE\u4FE1\u7AEF\uFF0Cweb\u7AEF\u5176\u503C\u7B49\u4E8EpageX\u3001pageY\n      x: 0,\n      y: 0,\n\n      clientX: 0,\n      clientY: 0,\n      pageX: 0,\n      pageY: 0,\n      screenX: 0,\n      screenY: 0,\n      force: 1,\n\n      /**\n         * \u624B\u52BF\u6ED1\u52A8\u65B9\u5411\uFF0C\u6B64\u5C5E\u6027\u5F53\u4E14\u4EC5\u5F53type\u4E3Aswipe\u65F6\u6709\u503C\n         */\n      swipeDirection: '',\n\n      /**\n         * \u7F29\u653E\u6BD4\u4F8B \u4EC5\u5F53\u4E8B\u4EF6\u4E3Azoom\u65F6\u53EF\u7528\n         */\n      zoomRate: 1,\n      /**\n         * \u65CB\u8F6C\u89D2\u5EA6 \u4EC5\u5F53\u4E8B\u4EF6\u4E3Arotate\u65F6\u53EF\u7528\n         */\n      angle: 0,\n\n      /**\n         * \u521B\u5EFA\u65F6\u95F4\n         */\n      createTime: Date.now()\n    }\n\n    data = Object.assign(data, event)\n    data.type = type\n    return data\n  }\n\n  /**\n   * \u83B7\u53D6\u7F29\u653E\u6BD4\u4F8B\n   * @param preLife\n   * @param curLife\n   * @return {number}\n   * @private\n   */\n  getZoomRateAndRotateAngle (preLife: TouchLife, curLife: TouchLife) {\n    // this.triggerListener('log', 'preLife')\n    // this.triggerListener('log', preLife)\n    // this.triggerListener('log', 'curLife')\n    // this.triggerListener('log', curLife)\n\n    const x0 = preLife.startTouchEvent!.triggerTouch.pageX\n    const y0 = preLife.startTouchEvent!.triggerTouch.pageY\n    const x1 = curLife.startTouchEvent!.triggerTouch.pageX\n    const y1 = curLife.startTouchEvent!.triggerTouch.pageY\n\n    const preMoveTouch = preLife.moveTouchEventList.length > 0 ? preLife.moveTouchEventList[preLife.moveTouchEventList.length - 1] : preLife.startTouchEvent\n    const curMoveTouch = curLife.moveTouchEventList.length > 0 ? curLife.moveTouchEventList[curLife.moveTouchEventList.length - 1] : curLife.startTouchEvent\n    const x0move = preMoveTouch!.triggerTouch.pageX\n    const y0move = preMoveTouch!.triggerTouch.pageY\n    const x1move = curMoveTouch!.triggerTouch.pageX\n    const y1move = curMoveTouch!.triggerTouch.pageY\n\n    const vector0 = new YccMathVector(x1 - x0, y1 - y0)\n    const vector1 = new YccMathVector(x1move - x0move, y1move - y0move)\n\n    const angle = Math.acos(vector1.dot(vector0) / (vector1.getLength() * vector0.getLength())) / Math.PI * 180\n    return {\n      rate: vector1.getLength() / vector0.getLength(),\n      angle: angle * (vector1.cross(vector0).z > 0 ? -1 : 1)\n    }// (new Ycc.Math.Vector(x1move-x0move,y1move-y0move).getLength())/(new Ycc.Math.Vector(x1-x0,y1-y0).getLength());\n  }\n\n  /**\n   * \u83B7\u53D6\u67D0\u4E2A\u89E6\u6478\u70B9\u7684swipe\u65B9\u5411\n   * @private\n   */\n  _getSwipeDirection (x1: number, y1: number, x2: number, y2: number) {\n    return Math.abs(x1 - x2) >= Math.abs(y1 - y2) ? (x1 - x2 > 0 ? 'left' : 'right') : (y1 - y2 > 0 ? 'up' : 'down')\n  }\n\n  /**\n   * \u521D\u59CB\u5316\u79FB\u52A8\u7AEF\u7684\u624B\u52BF\n   * @private\n   */\n  _initForMobile () {\n    const self = this\n    const tracer = new TouchLifeTracer(this.option.target!)\n    this.touchLifeTracer = tracer\n    // \u4E0A\u4E00\u6B21\u89E6\u6478\u3001\u5F53\u524D\u89E6\u6478\n    let preLife: TouchLife | null, curLife: TouchLife | null\n    // \u662F\u5426\u963B\u6B62\u4E8B\u4EF6\n    const prevent = {\n      tap: false,\n      swipe: false\n    }\n\n    tracer.onlifestart = function (life) {\n      self.triggerListener('tap', self._createEventData(life.startTouchEvent!, 'tap'))\n      // self.triggerListener('log', 'tap triggered')\n\n      // \u89E6\u53D1\u62D6\u62FD\u5F00\u59CB\u4E8B\u4EF6\n      self.triggerListener('dragstart', self._createEventData(life.startTouchEvent!, 'dragstart'))\n\n      // \u591A\u4E2A\u89E6\u6478\u70B9\u7684\u60C5\u51B5\n      if (tracer.currentLifeList.length > 1) {\n        self.ismutiltouching = true\n        // \u5224\u65AD\u662F\u5426\u542F\u7528\u591A\u70B9\u89E6\u63A7\n        if (!self.option.useMulti) return\n\n        // self.triggerListener('log', 'multi touch start ...')\n        self.triggerListener('multistart', tracer.currentLifeList)\n\n        prevent.tap = false\n        prevent.swipe = false\n        clearTimeout(self._longTapTimeout)\n        // \u7F29\u653E\u3001\u65CB\u8F6C\u53EA\u53D6\u6700\u5148\u63A5\u89E6\u7684\u4E24\u4E2A\u70B9\u5373\u53EF\n        preLife = tracer.currentLifeList[0]\n        curLife = tracer.currentLifeList[1]\n        return this\n      }\n      self.ismutiltouching = false\n      // \u53EA\u6709\u4E00\u4E2A\u89E6\u6478\u70B9\u7684\u60C5\u51B5\n      prevent.tap = false\n      prevent.swipe = false\n      // \u957F\u6309\u4E8B\u4EF6\n      self._longTapTimeout = setTimeout(function () {\n        self.triggerListener('longtap', self._createEventData(life.startTouchEvent!, 'longtap'))\n      }, 750)\n    }\n    tracer.onlifechange = function (life) {\n    // \u53EA\u8981\u5B58\u5728\u79FB\u52A8\u7684\u63A5\u89E6\u70B9\uFF0C\u5C31\u89E6\u53D1dragging\u4E8B\u4EF6\n      life.moveTouchEventList.forEach(function (moveEvent) {\n        self.triggerListener('dragging', self._createEventData(moveEvent, 'dragging'))\n      })\n\n      if (tracer.currentLifeList.length > 1) {\n        self.ismutiltouching = true\n\n        // \u5224\u65AD\u662F\u5426\u542F\u7528\u591A\u70B9\u89E6\u63A7\n        if (!self.option.useMulti) return\n        prevent.tap = true\n        prevent.swipe = true\n        // self.triggerListener('log', 'multi touch move ...')\n        self.triggerListener('multichange', preLife, curLife)\n\n        const rateAndAngle = self.getZoomRateAndRotateAngle(preLife!, curLife!)\n\n        if (isNum(rateAndAngle.rate)) {\n          const e = self._createEventData(preLife!.startTouchEvent!, 'zoom')\n          e.zoomRate = rateAndAngle.rate\n          self.triggerListener('zoom', self._createEventData(e, 'zoom'))\n          // self.triggerListener('log', 'zoom triggered', rateAndAngle.rate)\n        }\n        if (isNum(rateAndAngle.angle)) {\n          const e = self._createEventData(preLife!.startTouchEvent!, 'rotate')\n          e.angle = rateAndAngle.angle\n          self.triggerListener('rotate', self._createEventData(e, 'rotate'))\n          // self.triggerListener('rotate',self._createEventData(preLife.startTouchEvent,'rotate'),rateAndAngle.angle);\n          // self.triggerListener('log', 'rotate triggered', rateAndAngle.angle)\n        }\n        return this\n      }\n\n      // \u53EA\u6709\u4E00\u4E2A\u89E6\u6478\u70B9\u7684\u60C5\u51B5\n      if (life.moveTouchEventList.length > 0) {\n        self.ismutiltouching = false\n        const firstMove = life.startTouchEvent!.triggerTouch\n        const lastMove = Array.prototype.slice.call(life.moveTouchEventList, -1)[0]\n        // \u5982\u679C\u89E6\u6478\u70B9\u6309\u4E0B\u671F\u95F4\u5B58\u5728\u79FB\u52A8\u884C\u4E3A\uFF0C\u4E14\u79FB\u52A8\u8DDD\u79BB\u5927\u4E8E10\uFF0C\u5219\u8BA4\u4E3A\u8BE5\u64CD\u4F5C\u4E0D\u662Ftap\u3001longtap\n        if (Math.abs(lastMove.pageX - firstMove.pageX) > 10 || Math.abs(lastMove.pageY - firstMove.pageY) > 10) {\n          prevent.tap = true\n          clearTimeout(self._longTapTimeout)\n        }\n      }\n    }\n    tracer.onlifeend = function (life) {\n      self.triggerListener('dragend', self._createEventData(life.endTouchEvent!.triggerTouch, 'dragend'))\n      self.ismutiltouching = true\n\n      // \u82E5\u67D0\u4E2A\u89E6\u6478\u7ED3\u675F\uFF0C\u5F53\u524D\u89E6\u6478\u70B9\u4E2A\u6570\u4E3A1\uFF0C\u8BF4\u660E\u4E4B\u524D\u7684\u64CD\u4F5C\u4E3A\u591A\u70B9\u89E6\u63A7\u3002\u8FD9\u91CC\u53D1\u9001\u591A\u70B9\u89E6\u63A7\u7ED3\u675F\u4E8B\u4EF6\n      if (tracer.currentLifeList.length === 1) {\n        self.ismutiltouching = false\n        self.triggerListener('multiend', preLife, curLife); return\n      }\n\n      if (tracer.currentLifeList.length === 0) {\n        self.ismutiltouching = false\n\n        // \u5F00\u59CB\u548C\u7ED3\u675F\u65F6\u95F4\u5728300ms\u5185\uFF0C\u8BA4\u4E3A\u662Ftap\u4E8B\u4EF6\n        if (!prevent.tap && life.endTime - life.startTime < 300) {\n        // \u53D6\u6D88\u957F\u6309\u4E8B\u4EF6\n          clearTimeout(self._longTapTimeout)\n\n          // \u4E24\u6B21\u70B9\u51FB\u5728300ms\u5185\uFF0C\u5E76\u4E14\u4E24\u6B21\u70B9\u51FB\u7684\u8303\u56F4\u572810px\u5185\uFF0C\u5219\u8BA4\u4E3A\u662Fdoubletap\u4E8B\u4EF6\n          if (preLife && life.endTime - preLife.endTime < 300 && Math.abs(preLife.endTouchEvent!.triggerTouch.pageX - life.endTouchEvent!.triggerTouch.pageX) < 10 && Math.abs(preLife.endTouchEvent!.triggerTouch.pageY - life.endTouchEvent!.triggerTouch.pageY) < 10) {\n            self.triggerListener('doubletap', self._createEventData(life.endTouchEvent!.triggerTouch, 'doubletap'))\n            self.triggerListener('log', 'doubletap triggered')\n            preLife = null\n            return this\n          }\n          preLife = life\n          return this\n        }\n\n        // \u5982\u679C\u89E6\u6478\u70B9\u6309\u4E0B\u671F\u95F4\u5B58\u5728\u79FB\u52A8\u884C\u4E3A\uFF0C\u4E14\u79FB\u52A8\u8303\u56F4\u5927\u4E8E30px\uFF0C\u89E6\u6478\u65F6\u95F4\u5728200ms\u5185\uFF0C\u5219\u8BA4\u4E3A\u8BE5\u64CD\u4F5C\u662Fswipe\n        if (!prevent.swipe && life.endTime - life.startTime < 300) {\n          const firstMove = life.startTouchEvent!.triggerTouch\n          const lastMove = Array.prototype.slice.call(life.moveTouchEventList, -1)[0]\n          if (Math.abs(lastMove.pageX - firstMove.pageX) > 30 || Math.abs(lastMove.pageY - firstMove.pageY) > 30) {\n            const dir = self._getSwipeDirection(firstMove.pageX, firstMove.pageY, lastMove.pageX, lastMove.pageY)\n            const type = 'swipe' + dir\n            self.triggerListener('log', type)\n            // \u89E6\u53D1swipeXXX\n            self.triggerListener(type, self._createEventData({ ...life.endTouchEvent!, dir }, type))\n            // \u89E6\u53D1swipe\n            self.triggerListener('swipe', self._createEventData({ ...life.endTouchEvent!, dir }, 'swipe'))\n            console.log('swipe', type)\n          }\n          return this\n        }\n      }\n    }\n  }\n}\n", "// import PolygonUI from '@datagetter.cn/ycc/ui/PolygonUI'\nimport TextUI from '@datagetter.cn/ycc/ui/TextUI'\nimport Ycc from '@datagetter.cn/ycc/Ycc'\nimport { YccMathDot, YccMathRect } from '@datagetter.cn/ycc/tools/YccMath'\nimport YccTicker from '@datagetter.cn/ycc/tools/YccTicker'\nimport ImageUI from '@datagetter.cn/ycc/ui/ImageUI'\nimport LineUI from '@datagetter.cn/ycc/ui/LineUI'\nimport PolygonUI from '@datagetter.cn/ycc/ui/PolygonUI'\nimport YccGesture from '@datagetter.cn/ycc/tools/YccGesture'\n// import LineUI from '@datagetter.cn/ycc/ui/LineUI'\n// import ImageUI from '@datagetter.cn/ycc/ui/ImageUI'\n\n/**\n * \u65B0\u5EFA\u5E94\u7528\n */\nexport default class App extends Ycc {\n  created () {\n    // \u52A0\u5165\u5230dom\u4E2D\n    document.getElementById('canvas')?.appendChild(this.stage.stageCanvas)\n    new LineUI({\n      dots: [\n        new YccMathDot(10, 10),\n        new YccMathDot(100, 100)\n      ]\n    }).addToLayer(this.stage.defaultLayer)\n\n    const gesture = new YccGesture({ target: this.stage.stageCanvas, useMulti: true })\n    console.log(gesture)\n\n    // \u65B0\u5EFA\u4E00\u4E2AUI\n    new PolygonUI({\n      name: 'TestPolygon',\n      anchor: new YccMathDot(200, 200),\n      coordinates: [\n        new YccMathDot(0, 0),\n        new YccMathDot(200, 0),\n        new YccMathDot(0, 200),\n        new YccMathDot(0, 0)\n      ]\n    }).addToLayer(this.stage.defaultLayer)\n\n    // \u65B0\u5EFA\u4E00\u4E2A\u6587\u672C\n    new TextUI({\n      value: 'sfsdfsdf',\n      anchor: new YccMathDot(200, 10),\n      style: {\n        fontSize: 16,\n        color: 'red'\n      }\n    }).addToLayer(this.stage.defaultLayer)\n\n    new ImageUI({\n      name: 'TestImage',\n      anchor: new YccMathDot(50, 50),\n      // rotation: 30,\n      mirror: 1,\n      resName: 'radius',\n      fillMode: 'scale9Grid',\n      scale9GridRect: new YccMathRect(30, 30, 128 - 30 * 2, 128 - 30 * 2),\n      rect: new YccMathRect(-10, -30, 180, 180)\n    }).addToLayer(this.stage.defaultLayer)\n\n    const frameText = new TextUI({\n      value: ''\n    }).addToLayer(this.stage.defaultLayer)\n\n    // \u52A0\u5165\u5B9A\u65F6\u5668\n    const ticker = new YccTicker(this)\n    ticker.addFrameListener(frame => {\n      frameText.props.value = `${frame.deltaTime.toFixed(2)}ms \u5E73\u5747\uFF1A${((Date.now() - ticker.startTime) / frame.frameCount).toFixed(2)}ms  \u7ED8\u5236\u5C3A\u5BF8\uFF1A${this.stage.stageCanvas.width}*${this.stage.stageCanvas.height}px dpi\uFF1A${this.stage.stageInfo.dpi}`\n      this.render()\n    }).start(60)\n\n    this.render()\n  }\n\n  render () {\n    // \u5148\u5168\u90E8\u6E05\u7A7A\u821E\u53F0\n    // \u6CE8\uFF1A\u6761\u4EF6\u5141\u8BB8\u7684\u60C5\u51B5\uFF0C\u53EF\u4EE5\u53EA\u90E8\u5206\u6E05\u7A7A\n    this.stage.clearStage()\n\n    // \u8FD9\u91CC\u53EF\u4EE5\u505A\u70B9\u52A8\u753B\n    // \u6BD4\u5982\uFF0C\u6539\u53D8\u4E00\u4E0BUI\u7684\u4F4D\u7F6E\n    const TestImage = this.stage.getElementByName('TestImage')\n    TestImage!.props.rotation++\n\n    // \u6E32\u67D3\u51FD\u6570\uFF0C\u76F4\u63A5\u8C03\u7528`renderAll`\n    // \u6CE8\uFF1A\u6761\u4EF6\u5141\u8BB8\u7684\u60C5\u51B5\uFF0C\u53EF\u4EE5\u53EA\u90E8\u5206render\n    this.stage.renderAll()\n  }\n}\n", "/**\n * bootstrap\u542F\u52A8\u6587\u4EF6\n * \u4E00\u4E9B\u5F02\u6B65\u64CD\u4F5C\u3001\u8D44\u6E90\u52A0\u8F7D\u7B49\uFF0C\u90FD\u53EF\u4EE5\u5728\u6B64\u6587\u4EF6\u8FDB\u884C\n */\nimport { SetGlobal } from '@datagetter.cn/ycc/tools/YccGlobalCache'\nimport { ParallelLoader, Resource } from '@datagetter.cn/ycc/tools/YccLoader'\nimport App from './src/app'\n\nSetGlobal('env', 'h5')\nSetGlobal('frameRate', 60)\n\nconst app = new App()\n\n// \u5B9A\u4E49\u8D44\u6E90\nconst resources = [\n  {\n    name: 'test',\n    type: 'image',\n    url: 'https://smartedu.jnei.cn/upload/files/upload/ce155375-3dc3-479e-b4d4-8690cc906d40_WechatIMG15%402x.a69e9004.png',\n    crossOrigin: '*'\n  } as Resource,\n  {\n    name: 'radius',\n    type: 'image',\n    url: 'https://bpic.588ku.com/element_origin_min_pic/01/01/71/9556f3fa9fc2b12.jpg',\n    crossOrigin: '*'\n  } as Resource\n]\n\nnew ParallelLoader(app, resources).load((result) => {\n  console.log('\u8D44\u6E90\u52A0\u8F7D\u7ED3\u675F', resources, result)\n  // console.log(map?.test)\n  app.bootstrap(result)\n})\n"],
  "mappings": "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",
  "names": ["_a", "_a", "_a", "_a", "_a", "resources", "rect", "dpi", "_a", "_a", "_a"]
}
