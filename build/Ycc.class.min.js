!function(a){a.Ycc=function b(a){this.canvasDom=null,this.ctx=null,this.layerList=[],this.photoManager=null,this.layerManager=null,this.ticker=null,this.loader=new b.Loader,this.baseUI=null,this.config=a||{debug:{drawContainer:!1}},this.isMobile=b.utils.isMobile()},a.Ycc.prototype.getStageWidth=function(){return this.ctx.canvas.width},a.Ycc.prototype.getStageHeight=function(){return this.ctx.canvas.height},a.Ycc.prototype.bindCanvas=function(a){return a._ycc=this,this.canvasDom=a,this.ctx=this.canvasDom.getContext("2d"),this.layerList=[],this.photoManager=new Ycc.PhotoManager(this),this.layerManager=new Ycc.LayerManager(this),this.ticker=new Ycc.Ticker(this),this.baseUI=new Ycc.UI(this.ctx.canvas),this.init(),this},a.Ycc.prototype.init=function(){this._initStageGestureEvent()},a.Ycc.prototype._initStageGestureEvent=function(){function a(a){var b=parseInt(a.clientX-g.ctx.canvas.getBoundingClientRect().left),c=parseInt(a.clientY-g.ctx.canvas.getBoundingClientRect().top);h=g.getUIFromPointer(new Ycc.Math.Dot(b,c)),e(a.type,b,c),h&&h.belongTo.enableEventManager&&f(a.type,b,c,h)}function b(a){var b=parseInt(a.clientX-g.ctx.canvas.getBoundingClientRect().left),c=parseInt(a.clientY-g.ctx.canvas.getBoundingClientRect().top);e(a.type,b,c),h&&h.belongTo.enableEventManager&&f(a.type,b,c,h)}function c(a){var b=parseInt(a.clientX-g.ctx.canvas.getBoundingClientRect().left),c=parseInt(a.clientY-g.ctx.canvas.getBoundingClientRect().top);e(a.type,b,c),h&&h.belongTo.enableEventManager&&f(a.type,b,c,h),h=null}function d(a){var b=parseInt(a.clientX-g.ctx.canvas.getBoundingClientRect().left),c=parseInt(a.clientY-g.ctx.canvas.getBoundingClientRect().top),d=g.getUIFromPointer(new Ycc.Math.Dot(b,c));e(a.type,b,c),d&&d.belongTo.enableEventManager&&f(a.type,b,c,d)}function e(a,b,c){for(var d=g.layerList.length-1;d>=0;d--){var e=g.layerList[d];e.enableEventManager&&e.enableEventManager&&e.triggerListener(a,new Ycc.Event({type:a,x:b,y:c}))}}function f(a,b,c,d){d.triggerListener(a,new Ycc.Event({x:b,y:c,type:a,target:d}))}var g=this,h=null,i=new Ycc.Gesture({target:this.ctx.canvas});i.addListener("tap",d),i.addListener("longtap",d),i.addListener("doubletap",d),i.addListener("swipeleft",d),i.addListener("swiperight",d),i.addListener("swipeup",d),i.addListener("swipedown",d),i.addListener("dragstart",a),i.addListener("dragging",b),i.addListener("dragend",c)},a.Ycc.prototype.clearStage=function(){this.ctx.clearRect(0,0,this.getStageWidth(),this.getStageHeight())},a.Ycc.prototype.reRenderStage=function(){this.clearStage(),this.layerManager.renderAllLayerToStage()},a.Ycc.prototype.findLayerById=function(a){for(var b=0;b<this.layerList.length;b++){var c=this.layerList[b];if(c.id===a)return c}return null},a.Ycc.prototype.findUiById=function(a){for(var b=0;b<this.layerList.length;b++)for(var c=this.layerList[b],d=0;d<c.uiList.length;d++){var e=c.uiList[d];if(e.id===a)return e}return null},a.Ycc.prototype.getUIFromPointer=function(a,b){var c=this;b=!Ycc.utils.isBoolean(b)||b;for(var d=c.layerList.length-1;d>=0;d--){var e=c.layerList[d];if(!b||e.show)for(var f=e.uiList.length-1;f>=0;f--){var g=e.uiList[f];if((!b||g.show)&&a.isInRect(g.getAbsolutePosition()))return g}}return null}}(window);
//# sourceMappingURL=Ycc.class.min.js.map