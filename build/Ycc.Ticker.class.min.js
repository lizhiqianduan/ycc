!function(a){a.Ticker=function(b){this.yccClass=a.Ticker,this.yccInstance=b,this.startTime=Date.now(),this.lastFrameTime=0,this.frameListenerList=[],this.defaultFrameRate=60,this.realTimeFrameRate=this.defaultFrameRate,this.frameAllCount=0,this.timerTickCount=0,this._timerId=0,this._isRunning=!1},a.Ticker.prototype.start=function(a){function b(){var f=0===c.timerTickCount?c.startTime:Date.now();c.timerTickCount++;var g=f-c.startTime,h=c.frameAllCount*d;g>h&&(c.frameAllCount++,c.realTimeFrameRate=1e3*c.frameAllCount/(f-c.startTime),c.broadcastFrameEvent(),c.broadcastToLayer(),(Date.now()-c.lastFrameTime)/d>3&&(console.warn("第%d帧：",c.frameAllCount),console.warn("该帧率已低于正常值的1/3！若相邻帧持续警告，请适当降低帧率，或者提升刷新效率！","正常值：",a," 当前值：",1e3/(Date.now()-c.lastFrameTime))),c.lastFrameTime=Date.now()),c._timerId=e.call(window,b)}var c=this;if(!c._isRunning){a=a?a:c.defaultFrameRate;var d=1e3/a,e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;c.frameAllCount=0,e||(e=function(a){return window.setTimeout(a,1e3/60)}),c.startTime=Date.now(),c._timerId=e.call(window,b),c._isRunning=!0}},a.Ticker.prototype.stop=function(){var a=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame;a||(a=function(a){return window.clearTimeout(a)}),a(this._timerId),this._isRunning=!1},a.Ticker.prototype.addFrameListener=function(a){this.frameListenerList.push(a)},a.Ticker.prototype.broadcastFrameEvent=function(){for(var b=0;b<this.frameListenerList.length;b++){var c=this.frameListenerList[b];a.utils.isFn(c)&&c()}},a.Ticker.prototype.broadcastToLayer=function(){for(var a=0;a<this.yccInstance.layerList.length;a++){var b=this.yccInstance.layerList[a];b.show&&b.enableFrameEvent&&b.onFrameComing()}}}(window.Ycc);
//# sourceMappingURL=Ycc.Ticker.class.min.js.map