<!DOCTYPf html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name=viewport content="width=device-width,initial-scale=1,user-scalable=0,viewport-fit=cover">
	<title>音频示例</title>
	<link rel="stylesheet" href="../style.css">
</head>
<body>
<div class="return-btn">
	<a href="../">
		返回首页
	</a>
</div>
<div class="tip">
	<h3>示例说明：</h3>
	<div>
		1、这个示例展示系统的音频播放功能。<br>
		2、点击播放，一首《那女孩对我说》送给你。<br>
	</div>
	<br><br>
</div>


<button onclick="play()" id="play" disabled>播放</button>
<button onclick="stop()">停止</button>
</body>
</html>

<script src="http://localhost:9000/livereload.js"></script>
<script src="../common.js"></script>
<script src="../../build/ycc.js"></script>

<script>

	var ycc = new Ycc();
	ycc.bindCanvas(ycc.createCanvas());


	var resArr = [
		// '31!','32!','33!','34!','35!','36!','37!',
		'41!','42!','43!','44!','45!','46!','47!',
		'51!','52!','53!','54!','55!','56!','57!',
		'61!','62!','63!','64!','65!','66!','67!',
	].map(function(item){
		return {name:item,url:'./'+item+'.mp3',type:'audio'};
	});
	var map = {

		'1d':'41!',
		'2d':'42!',
		'3d':'43!',
		'4d':'44!',
		'5d':'45!',
		'6d':'46!',
		'7d':'47!',


		'1e':'51!',
		'2e':'52!',
		'3e':'53!',
		'4e':'54!',
		'5e':'55!',
		'6e':'56!',
		'7e':'57!',

		'1f':'61!',
		'2f':'62!',
		'3f':'63!',
		'4f':'64!',
		'5f':'65!',
		'6f':'66!',
		'7f':'67!',

	};
	var song = [];
	// 那女孩对我说 500ms
	// song = [
	// 	'5e 6e 1f 1f 6e 2f 00',
	// 	'2f 7e 2f 3f 3f 7e 1f 00',
	// 	'1f 7e 5e 6e 6e 00',
	// 	'6e 5e 6e 3e 3e 2e 3e 00',
	// 	'5e 6e 1f 4f 3f 2f 00',
	// 	'2f 7e 2f 3f 3f 7e 1f 00',
	// 	'1f 7e 3f 3f 7e 6e 00',
	// 	'6e 7e 1f 5f 3f 4f 3f 00',
	// 	//
	// 	'5e 6e 1f 1f 6e 2f 00',
	// 	'2f 7e 2f 3f 3f 7e 1f 00',
	// 	'1f 7e 5e 6e 6e 00',
	// 	'6e 5e 6e 3e 3e 2e 3e 00',
	// 	'5e 6e 1f 4f 3f 2f 00',
	// 	'2f 7e 2f 3f 3f 7e 1f 00',
	// 	'1f 7e 3f 3f 7e 6e 00',
	// 	'6e 1f 3f 4f 2f 7e 1f 00'
	// ];

	// 缘分一道桥 300ms
	// song = [
	// 	'5e 6e 1f 00',
	// 	'6e 1f 2f 00 1f 00',
	// 	'3f 5f 6f 5f 3f 00',
	// 	'6f 5f 3f 00',
	// 	'5f 3f 2f 1f 1f 3f 2f 00 00',
	//
	// 	'5e 6e 1f 00',
	// 	'6e 1f 2f 00 1f 00',
	// 	'3f 5f 6f 7f 7f 00',
	// 	'6f 5f 3f 00',
	// 	'5f 3f 2f 1f 1f 2f 3f 3f 2f 2f 1f 00 00',
	// 	//
	// 	'5e 6e 1f 00',
	// 	'6e 1f 2f 00 1f 00',
	// 	'3f 5f 6f 5f 3f 00',
	// 	'6f 5f 3f 00',
	// 	'5f 3f 2f 1f 1f 3f 2f 00 00',
	//
	// 	'5e 6e 1f 00',
	// 	'6e 1f 2f 00 1f 00',
	// 	'3f 5f 6f 7f 7f 00',
	// 	'6f 5f 3f 00',
	// 	'5f 3f 2f 1f 1f 2f 3f 00 3f 00 2f 00 2f 00 1f 00 00',
	// ];

	// 把孤独当做晚餐 300ms
	// song = [
	// 	'3e 3e 2e 2e 1e 1e 00 6d 6d 2e 3e 5e 3e 00',
	// 	'3e 3e 2e 2e 1e 1e 00 6d 6d 2e 3e 7e 5e 00',
	// 	'3e 3e 2e 2e 1e 1e 00 6d 2e 00 2e 3e 5e 7e 1f 00',
	// 	'3e 2e 6d 00 3e 00 2e 3e 5d 6d 00',
	// ];

	// 断了的弦 300ms
	// song = [
	// 		// '5d 4d 00 3d 3d 00 00 5d 4d 00 3d 3d 00 00',
	// 		// '2d 3d 00 5d 1e 00 00 1e 7d 00 6d 6d 00 5d 00',
	// 		// '5d 1d 00 2d 3d 00 00 5d 3d 1d 2d 1c',
	// 		// '1d 7e 1d 4d 3d 3d 2d 2d 00 1d 4d 4d 3d 3d 2d 1d 00 6e 1d 00',
	// 	'6d 7e 7e 7e 7e 6e 6e 00',
	// 	'7e 7e 7e 7e 7e 1f 6e 00',
	// 	'6e 6e 6e 5e 5e 2e 3e 00',
	// 	'5e 5e 5e 3e 3e 1e 2e 00',
	// 	//
	// 	'6d 7e 7e 7e 7e 6e 6e 00',
	// 	'7e 7e 7e 7e 7e 1f 6e 00',
	// 	'6e 6e 6e 5e 5e 2e 3e 5e 00',
	//
	// 		// '1d 00 7e 1d 00 00 1d 3d 2d 00 6e 1d 00 00',
	// 		// '6e 1d 00 4d 3d 00 2d 1d 4d 4c'
	// ];

	// 小毛驴
	song = [
			'11135555666'.split('').map(item=>item+'e').join(' '),
		'1f',
		'5044463333222250511135555666'.split('').map(item=>item+'e').join(' '),
		'1f',
		'50444633333322231'.split('').map(item=>item+'e').join(' ')
	];

	// 音域测试
	// song = [
	// 	'1234567'.split('').map(item=>item+'d').join(' '),
	// 	'1234567'.split('').map(item=>item+'e').join(' '),
	// 	'1234567'.split('').map(item=>item+'f').join(' '),
	// ];

	// 父亲 400ms
	// song = [
	// 		'1e 5d 1e 3e 4e 3e 2e 1e 1e 5d 1e 2e 3e 00',
	// 		'1e 5d 1e 3e 4e 3e 2e 1e 3e 2e 2e 1e 1e 00',
	// 		'1e 5d 1e 3e 4e 3e 2e 1e 6e 5e 5e 4e 4e 00',
	// 		'1e 5d 1e 3e 4e 3e 2e 00 1e 3e 2e 2e 1e 1e 00',
	// 		'1e 00 6d 00 6e 00 6e 5e 3e 3e 00',
	// 		'3e 4e 5e 1e 5e 5e 00',
	// 		'1e 7d 6d 00 6e 6e 7e 5e 5e 00',
	// 		'5e 6e 5e 4e 00 3e 3e 00 2e 00 00',
	// 		//
	// 		'6e 7e 1f 1f 1f 1f 7e 00',
	// 		'6e 7e 7e 7e 7e 3f 2f 1f 00',
	// 		'6e 7e 1f 1f 1f 1f 1f 7e 6e 7e 6e 5e 00',
	// 		'6e 7e 1f 1f 1f 1f 7e 00',
	// 		'6e 7e 7e 7e 7e 3f 7e 1f 00',
	// 		'6e 7e 1f 1f 1f 3f 2f 00 7e 6e 6e 00',
	//
	// 		'6e 7e 1f 1f 1f 1f 7e 00',
	// 		'6e 7e 7e 7e 7e 3f 2f 1f 00',
	// 		'6e 7e 1f 1f 1f 1f 1f 7e 6e 6e 6e 5e 00',
	// 		'6e 7e 1f 1f 1f 1f 7e 00',
	// 		'6e 7e 7e 7e 7e 3f 7e 1f 00',
	// 		'6e 7e 1f 1f 1f 3f 2f 00 7e 6e 6e 00'
	//
	// ];

	// 9277 300ms
	// song = [
	// 		'6d 1e 2e 2e 3e 2e 00 1e 6d 1e 1e 1e 6d 5d 1e 00',
	// 		'1e 6d 5d 2e 3e 2e 00 1e 6d 1e 1e 6d 5d 1e 00',
	// 		'6d 1e 2e 2e 3e 2e 00 1e 6d 1e 1e 1e 6d 5d 1e 00',
	// 		'1e 6d 5d 2e 3e 2e 00 1e 6d 1e 1e 6d 5d 1e 00',
	//
	// 		'2e 3e 2e 00 1e 6d 1e 00 1e 6d 5d 1e 00',
	// 		'1e 6d 5d 2e 3e 2e 00 1e 6d 1e 1e 6d 5d 1e 00',
	// 		'6d 1e 2e 2e 3e 2e 00 1e 6d 1e 1e 1e 6d 5d 1e 00',
	// 		'1e 6d 5d 2e 3e 2e 00 1e 6d 1e 1e 6d 5d 3e 2e 00 00'
	// ];

	// 我的将军啊 300ms
	// song = [
	// 		'6d 1e 2e 00 3e 00 2e 00',
	// 		'1e 2e 3e 5e 5e 7d 6d 00',
	// 		'6d 1e 2e 2e 3e 2e 2e 00',
	// 		'1e 2e 3e 5e 5e 7d 6d 00',
	//
	// 	'6d 1e 2e 00 3e 00 2e 00',
	// 	'1e 2e 3e 5e 5e 7d 6d 00',
	// 	'6d 1e 2e 2e 3e 2e 2e 00',
	// 	'1e 2e 3e 5e 5e 7d 6d 00',
	//
	// 	'6d 1e 2e 00 3e 00 2e 00',
	// 	'1e 2e 3e 5e 5e 7d 6d 00',
	// 	'6e 1f 2f 2f 3f 2f 2f 00',
	// 	'1f 2f 3f 5f 5f 7e 6e 00',
	// 	'6e 1f 2f 2f 3f 2f 2f 00',
	// 	'1f 2f 3f 5f 5f 7e 6e 00'
	//
	// ];

	// 讲真的 300 200ms

	// song = [
	// 		'333211'.split('').map(item=>item+'e').join(' '),
	// 		'5d 6d 00 00',
	// 		'76767'.split('').map(item=>item+'d').join(' '),
	// 		'1e 2e 7d 00 1e 00 00',
	// 		'323511'.split('').map(item=>item+'e').join(' '),
	// 		'5d 6d 00 00',
	// 		'76767'.split('').map(item=>item+'d').join(' '),
	// 		'2e 7d 1e 00 00',
	//
	// 		'1e 00 6d 00 5e 00',
	// 		'554332'.split('').map(item=>item+'e').join(' '),
	// 		'00 00',
	// 		'7d 00 5d 00 4e 00 4e 4e 00 3e 2e 2e 1e 00 00',
	//
	// 		'12332'.split('').map(item=>item+'e').join(' '),
	// 		'00 00',
	// 		'1e 6d 4e 00 4e 00 4e 00',
	// 		'5443'.split('').map(item=>item+'e').join(' '),
	// 		'00 00',
	//
	// 		//
	// 		'7d 00 1e 00 2e 00', // 讲真的
	// 		'32323'.split('').map(item=>item+'e').join(' '),
	// 		'00 6d 5e 00 6e 4e 3e 4e 00 00',
	// 		'21212'.split('').map(item=>item+'e').join(' '),
	// 		'00 5d 4e 00 5e 3e 2e 3e 00 00',
	// 		'3e 2e 1e 3e 00 2e 00', //要你亲口说
	// 		'7d 2e 1e 2e 6e 00 00',
	// 		'6d 3e 1e 1e 6d 1e 2e 3e 3e 2e 00 00',
	//
	// 		'7d 00 1e 00 2e 00', // 讲真的
	// 		'32323'.split('').map(item=>item+'e').join(' '),
	// 		'00 6d 5e 00 6e 4e 3e 4e 00 00',
	// 		'21212'.split('').map(item=>item+'e').join(' '),
	// 		'00 5d 4e 00 5e 3e 2e 3e 00 00',
	// 		'3e 2e 1e 3e 00 2e 00', //自作多情了
	// 		'1e 2e 1e 2e 6e 00 00',
	// 		'6d 3e 1e 1e 6d 1e 6d 3e 3e 2e 00',
	// 		'3d 7d 1e 2e 7d 00 6d 00'
	//
	// ];



	ycc.loader.loadResOneByOne(resArr,function(resArr){
		onLoad();
	});


	function onLoad(){
		document.getElementById('play').disabled=false;
	}

	var timerid = 0;
	function play(){
		var index = 0;
		timerid=setInterval(function(){
			var key = song.join(' ').split(' ')[index];
			var resName = map[key];
			var tone = ycc.loader.getResByName(resName,resArr);
			if(tone) {
				console.log(key,tone);
				tone.res.play();
			}
			index++;
		},200);
	}

	function stop() {
		clearInterval(timerid);
	}

	// 获取乐谱字符串
	function getSongMelody(){
		song.join(' ');
	}





</script>